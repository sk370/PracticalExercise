<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/javaframe/spring5.html"><meta property="og:site_name" content="朱宇琦"><meta property="og:title" content="Spring"><meta property="og:description" content="Spring是轻量级的开源JavaEE框架，解决企业应用开发的复杂性，核心原理利用IoC：控制反转，把创建对象过程交给Spring进行管理和Aop：面向切面，不修改源代码进行功能增强使得Java开发变得简介、高效。"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="2022-07-17T00:00:00.000Z"><title>Spring | 朱宇琦</title><meta name="description" content="Java开发个人知识库">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.e12d86fd.css">
    <link rel="modulepreload" href="/assets/app.b5795010.js"><link rel="modulepreload" href="/assets/spring5.html.b1c404c7.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/spring5.html.3825d19d.js"><link rel="prefetch" href="/assets/about.html.cb7123e3.js"><link rel="prefetch" href="/assets/index.html.af3f4bfc.js"><link rel="prefetch" href="/assets/MySQL.html.826162cf.js"><link rel="prefetch" href="/assets/maven.html.9bb36588.js"><link rel="prefetch" href="/assets/mybatis-plus.html.eaf8c687.js"><link rel="prefetch" href="/assets/mybatis.html.61cd77e5.js"><link rel="prefetch" href="/assets/spring-boot.html.28bfae91.js"><link rel="prefetch" href="/assets/spring-mvc.html.97fa2929.js"><link rel="prefetch" href="/assets/ssm.html.b4ddd8e0.js"><link rel="prefetch" href="/assets/java-1.html.5450f139.js"><link rel="prefetch" href="/assets/java-2.html.051bbb84.js"><link rel="prefetch" href="/assets/java-3.html.7f1c2878.js"><link rel="prefetch" href="/assets/javaweb.html.95dcb090.js"><link rel="prefetch" href="/assets/404.html.d726b30e.js"><link rel="prefetch" href="/assets/index.html.5cab3570.js"><link rel="prefetch" href="/assets/index.html.90cc3bb8.js"><link rel="prefetch" href="/assets/index.html.acb5cd63.js"><link rel="prefetch" href="/assets/index.html.475144ed.js"><link rel="prefetch" href="/assets/index.html.e782eed2.js"><link rel="prefetch" href="/assets/index.html.16d171b2.js"><link rel="prefetch" href="/assets/index.html.5652f0e7.js"><link rel="prefetch" href="/assets/index.html.7d36e429.js"><link rel="prefetch" href="/assets/index.html.2cbbd98b.js"><link rel="prefetch" href="/assets/index.html.7e76503d.js"><link rel="prefetch" href="/assets/index.html.acc07b1c.js"><link rel="prefetch" href="/assets/index.html.164c33a6.js"><link rel="prefetch" href="/assets/index.html.8e9b3cfe.js"><link rel="prefetch" href="/assets/index.html.56d35abe.js"><link rel="prefetch" href="/assets/index.html.f097ea2d.js"><link rel="prefetch" href="/assets/index.html.b7554509.js"><link rel="prefetch" href="/assets/index.html.71aa4705.js"><link rel="prefetch" href="/assets/index.html.25365451.js"><link rel="prefetch" href="/assets/about.html.8d85a71a.js"><link rel="prefetch" href="/assets/index.html.896673be.js"><link rel="prefetch" href="/assets/MySQL.html.e5fda28c.js"><link rel="prefetch" href="/assets/maven.html.cf7a33a7.js"><link rel="prefetch" href="/assets/mybatis-plus.html.4506f634.js"><link rel="prefetch" href="/assets/mybatis.html.1d6aea26.js"><link rel="prefetch" href="/assets/spring-boot.html.72b3b9af.js"><link rel="prefetch" href="/assets/spring-mvc.html.7abd401a.js"><link rel="prefetch" href="/assets/ssm.html.bd0c07cd.js"><link rel="prefetch" href="/assets/java-1.html.ef1266db.js"><link rel="prefetch" href="/assets/java-2.html.fa6b9aa1.js"><link rel="prefetch" href="/assets/java-3.html.647cb4fc.js"><link rel="prefetch" href="/assets/javaweb.html.87fc85c4.js"><link rel="prefetch" href="/assets/404.html.32ee93c4.js"><link rel="prefetch" href="/assets/index.html.2a7aa51e.js"><link rel="prefetch" href="/assets/index.html.f9a3f11b.js"><link rel="prefetch" href="/assets/index.html.85335f35.js"><link rel="prefetch" href="/assets/index.html.caee9c6b.js"><link rel="prefetch" href="/assets/index.html.486fbf92.js"><link rel="prefetch" href="/assets/index.html.04d53dae.js"><link rel="prefetch" href="/assets/index.html.e3e04d18.js"><link rel="prefetch" href="/assets/index.html.00be6942.js"><link rel="prefetch" href="/assets/index.html.be398c84.js"><link rel="prefetch" href="/assets/index.html.04e36366.js"><link rel="prefetch" href="/assets/index.html.83f65593.js"><link rel="prefetch" href="/assets/index.html.50577557.js"><link rel="prefetch" href="/assets/index.html.de291a54.js"><link rel="prefetch" href="/assets/index.html.b1103842.js"><link rel="prefetch" href="/assets/index.html.46f3da8e.js"><link rel="prefetch" href="/assets/index.html.219d8a8b.js"><link rel="prefetch" href="/assets/index.html.ae189603.js"><link rel="prefetch" href="/assets/index.html.f16012f8.js"><link rel="prefetch" href="/assets/404.940b8618.js"><link rel="prefetch" href="/assets/Layout.a2d3c614.js"><link rel="prefetch" href="/assets/Slide.55099168.js"><link rel="prefetch" href="/assets/Blog.b6bd909f.js"><link rel="prefetch" href="/assets/auto.esm.36809f22.js"><link rel="prefetch" href="/assets/index.daae04bf.js"><link rel="prefetch" href="/assets/index.1842ee54.js"><link rel="prefetch" href="/assets/mermaid.esm.min.ee1e0284.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.092fbc15.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/3.jpg" alt="朱宇琦"><!----><span class="site-name hide-in-pad">朱宇琦</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="博客主页"><span class="icon iconfont icon-home"></span>博客主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="JavaSE"><span class="title"><span class="icon iconfont icon-creative"></span>JavaSE</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/javase/java-1.html" class="nav-link" aria-label="Java语言基础（上）"><span class="icon iconfont icon-note"></span>Java语言基础（上）<!----></a></li><li class="dropdown-item"><a href="/javase/java-2.html" class="nav-link" aria-label="Java语言基础（中）"><span class="icon iconfont icon-note"></span>Java语言基础（中）<!----></a></li><li class="dropdown-item"><a href="/javase/java-3.html" class="nav-link" aria-label="Java语言基础（下）"><span class="icon iconfont icon-note"></span>Java语言基础（下）<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/javaweb/javaweb.html" class="nav-link" aria-label="JavaWeb"><span class="icon iconfont icon-creative"></span>JavaWeb<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="数据库"><span class="title"><span class="icon iconfont icon-creative"></span>数据库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/database/MySQL.html" class="nav-link" aria-label="MySQL"><span class="icon iconfont icon-note"></span>MySQL<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java框架"><span class="title"><span class="icon iconfont icon-note"></span>Java框架</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>构建工具</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javaframe/maven.html" class="nav-link" aria-label="Maven"><span class="icon iconfont icon-note"></span>Maven<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring框架</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-current="page" href="/javaframe/spring5.html" class="router-link-active router-link-exact-active nav-link active" aria-label="Spring5"><span class="icon iconfont icon-note"></span>Spring5<!----></a></li><li class="dropdown-subitem"><a href="/javaframe/spring-mvc.html" class="nav-link" aria-label="SpringMVC"><span class="icon iconfont icon-note"></span>SpringMVC<!----></a></li><li class="dropdown-subitem"><a href="/javaframe/spring-boot.html" class="nav-link" aria-label="Spring Boot"><span class="icon iconfont icon-note"></span>Spring Boot<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>持久层框架</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javaframe/mybatis.html" class="nav-link" aria-label="Mybatis"><span class="icon iconfont icon-note"></span>Mybatis<!----></a></li><li class="dropdown-subitem"><a href="/javaframe/mybatis-plus.html" class="nav-link" aria-label="Mybatis-Plus"><span class="icon iconfont icon-note"></span>Mybatis-Plus<!----></a></li></ul></li><li class="dropdown-item"><a href="/javaframe/ssm.html" class="nav-link" aria-label="SSM整合"><span class="icon iconfont icon-note"></span>SSM整合<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/about.html" class="nav-link" aria-label="关于"><span class="icon iconfont icon-note"></span>关于<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/sk370" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="博客主页"><span class="icon iconfont icon-home"></span>博客主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note"></span><span class="title">JavaSE</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/javase/java-1.html" class="nav-link sidebar-link sidebar-page" aria-label="Java语言基础（上）"><span class="icon iconfont icon-creative"></span>Java语言基础（上）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/javase/java-2.html" class="nav-link sidebar-link sidebar-page" aria-label="Java语言基础（中）"><span class="icon iconfont icon-creative"></span>Java语言基础（中）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/javase/java-3.html" class="nav-link sidebar-link sidebar-page" aria-label="Java语言基础（下）"><span class="icon iconfont icon-creative"></span>Java语言基础（下）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><a href="/javaweb/javaweb.html" class="nav-link sidebar-link sidebar-page" aria-label="Java Web"><span class="icon iconfont icon-note"></span>Java Web<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note"></span><span class="title">数据库</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/database/MySQL.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQL"><span class="icon iconfont icon-creative"></span>MySQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-note"></span><span class="title">Java框架</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">构建工具</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-note"></span><span class="title">Spring框架</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/javaframe/spring5.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Spring5"><span class="icon iconfont icon-creative"></span>Spring5<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#第1章-spring概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="第1章 Spring概述"><!---->第1章 Spring概述<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_1-1-spring框架介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 Spring框架介绍"><!---->1.1 Spring框架介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_1-2-spring5-2下载" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 Spring5.2下载"><!---->1.2 Spring5.2下载<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_1-3-体验spring创建对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 体验spring创建对象"><!---->1.3 体验spring创建对象<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#第2章-ioc及ioc操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="第2章 IoC及IoC操作"><!---->第2章 IoC及IoC操作<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_2-1-ioc简述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 IoC简述"><!---->2.1 IoC简述<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_2-2-基于xml操作——bean管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 基于xml操作——Bean管理"><!---->2.2 基于xml操作——Bean管理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_2-3-基于注解操作——bean管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 基于注解操作——Bean管理"><!---->2.3 基于注解操作——Bean管理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#第3章-aop" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="第3章 Aop"><!---->第3章 Aop<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_3-1-aop介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 Aop介绍"><!---->3.1 Aop介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_3-2-aop操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 Aop操作"><!---->3.2 Aop操作<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#第4章-jdbc-template" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="第4章 Jdbc Template"><!---->第4章 Jdbc Template<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_4-1-jdbc-template介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 Jdbc Template介绍"><!---->4.1 Jdbc Template介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_4-2-jdbc-template对象的使用——操作数据库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 Jdbc Template对象的使用——操作数据库"><!---->4.2 Jdbc Template对象的使用——操作数据库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_4-3-jdbc-template批量操作数据库" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 Jdbc Template批量操作数据库"><!---->4.3 Jdbc Template批量操作数据库<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_4-4-事务操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.4 事务操作"><!---->4.4 事务操作<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_4-5-完全注解开发" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.5 完全注解开发"><!---->4.5 完全注解开发<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#第5章-spring5-新功能" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="第5章 Spring5 新功能"><!---->第5章 Spring5 新功能<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_5-0-新功能介绍" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.0 新功能介绍"><!---->5.0 新功能介绍<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_5-1-整合log4j2日志框架" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 整合Log4j2日志框架"><!---->5.1 整合Log4j2日志框架<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_5-2-核心容器支持-nullable注解" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 核心容器支持@Nullable注解"><!---->5.2 核心容器支持@Nullable注解<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_5-3-核心容器支持函数式风格-genericapplicationcontext" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3 核心容器支持函数式风格（GenericApplicationContext)"><!---->5.3 核心容器支持函数式风格（GenericApplicationContext)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_5-4-整合junit4" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.4 整合JUnit4"><!---->5.4 整合JUnit4<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_5-5-整合junit5" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.5 整合JUnit5"><!---->5.5 整合JUnit5<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javaframe/spring5.html#_5-6-springwebflux" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.6 SpringWebflux"><!---->5.6 SpringWebflux<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/javaframe/spring-mvc.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringMVC"><span class="icon iconfont icon-creative"></span>SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/javaframe/spring-boot.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringBoot"><span class="icon iconfont icon-creative"></span>SpringBoot<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">SSM整合</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-edit"></span>Spring</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年7月17日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="author-item">朱宇琦</span></span><span property="author" content="朱宇琦"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年7月17日</span><meta property="datePublished" content="2022-07-17T00:00:00.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" localizeddate="2022年7月17日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category3 clickable" role="navigation">框架</li><li class="category category1 clickable" role="navigation">Spring</li><meta property="articleSection" content="框架,Spring"></ul></span><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年7月17日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 47 分钟</span><meta property="timeRequired" content="PT47M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#第1章-spring概述" class="router-link-active router-link-exact-active toc-link level2">第1章 Spring概述</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_1-1-spring框架介绍" class="router-link-active router-link-exact-active toc-link level3">1.1 Spring框架介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_1-2-spring5-2下载" class="router-link-active router-link-exact-active toc-link level3">1.2 Spring5.2下载</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_1-3-体验spring创建对象" class="router-link-active router-link-exact-active toc-link level3">1.3 体验spring创建对象</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#第2章-ioc及ioc操作" class="router-link-active router-link-exact-active toc-link level2">第2章 IoC及IoC操作</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_2-1-ioc简述" class="router-link-active router-link-exact-active toc-link level3">2.1 IoC简述</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_2-2-基于xml操作——bean管理" class="router-link-active router-link-exact-active toc-link level3">2.2 基于xml操作——Bean管理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_2-3-基于注解操作——bean管理" class="router-link-active router-link-exact-active toc-link level3">2.3 基于注解操作——Bean管理</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#第3章-aop" class="router-link-active router-link-exact-active toc-link level2">第3章 Aop</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_3-1-aop介绍" class="router-link-active router-link-exact-active toc-link level3">3.1 Aop介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_3-2-aop操作" class="router-link-active router-link-exact-active toc-link level3">3.2 Aop操作</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#第4章-jdbc-template" class="router-link-active router-link-exact-active toc-link level2">第4章 Jdbc Template</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_4-1-jdbc-template介绍" class="router-link-active router-link-exact-active toc-link level3">4.1 Jdbc Template介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_4-2-jdbc-template对象的使用——操作数据库" class="router-link-active router-link-exact-active toc-link level3">4.2 Jdbc Template对象的使用——操作数据库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_4-3-jdbc-template批量操作数据库" class="router-link-active router-link-exact-active toc-link level3">4.3 Jdbc Template批量操作数据库</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_4-4-事务操作" class="router-link-active router-link-exact-active toc-link level3">4.4 事务操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_4-5-完全注解开发" class="router-link-active router-link-exact-active toc-link level3">4.5 完全注解开发</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#第5章-spring5-新功能" class="router-link-active router-link-exact-active toc-link level2">第5章 Spring5 新功能</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_5-0-新功能介绍" class="router-link-active router-link-exact-active toc-link level3">5.0 新功能介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_5-1-整合log4j2日志框架" class="router-link-active router-link-exact-active toc-link level3">5.1 整合Log4j2日志框架</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_5-2-核心容器支持-nullable注解" class="router-link-active router-link-exact-active toc-link level3">5.2 核心容器支持@Nullable注解</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_5-3-核心容器支持函数式风格-genericapplicationcontext" class="router-link-active router-link-exact-active toc-link level3">5.3 核心容器支持函数式风格（GenericApplicationContext)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_5-4-整合junit4" class="router-link-active router-link-exact-active toc-link level3">5.4 整合JUnit4</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_5-5-整合junit5" class="router-link-active router-link-exact-active toc-link level3">5.5 整合JUnit5</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javaframe/spring5.html#_5-6-springwebflux" class="router-link-active router-link-exact-active toc-link level3">5.6 SpringWebflux</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="spring" tabindex="-1"><a class="header-anchor" href="#spring" aria-hidden="true">#</a> Spring</h1><blockquote><ul><li>基于Spring5.0</li></ul></blockquote><h2 id="第1章-spring概述" tabindex="-1"><a class="header-anchor" href="#第1章-spring概述" aria-hidden="true">#</a> 第1章 Spring概述</h2><h3 id="_1-1-spring框架介绍" tabindex="-1"><a class="header-anchor" href="#_1-1-spring框架介绍" aria-hidden="true">#</a> 1.1 Spring框架介绍</h3><h4 id="_1-1-1-基本介绍" tabindex="-1"><a class="header-anchor" href="#_1-1-1-基本介绍" aria-hidden="true">#</a> 1.1.1 基本介绍</h4><ol><li>是什么：Spring是轻量级的开源JavaEE框架 <ul><li>框架：高效、简洁开发</li></ul></li><li>作用：解决企业应用开发的复杂性</li><li>核心：IoC和Aop <ul><li>IoC：控制反转，把创建对象过程交给Spring进行管理</li><li>Aop：面向切面，不修改源代码进行功能增强</li></ul></li><li>特点： <ul><li>方便解耦，简化开发</li><li>Aop 编程支持</li><li>方便程序测试</li><li>方便和其他框架进行整合</li><li>方便进行事务操作</li><li>降低 API 开发难度</li></ul></li></ol><h4 id="_1-1-2-框架结构图" tabindex="-1"><a class="header-anchor" href="#_1-1-2-框架结构图" aria-hidden="true">#</a> 1.1.2 框架结构图</h4><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658023855969-20d592e1-9ac0-4ffb-8848-e8f9430ad58d.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u2b44927f&amp;margin=[object Object]&amp;originHeight=540&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=uc0b95a8d-8e60-4988-873e-d6690bb6c4d&amp;title=" alt="" loading="lazy"></p><h3 id="_1-2-spring5-2下载" tabindex="-1"><a class="header-anchor" href="#_1-2-spring5-2下载" aria-hidden="true">#</a> 1.2 Spring5.2下载</h3><h4 id="_1-2-1-手动下载-引入idea" tabindex="-1"><a class="header-anchor" href="#_1-2-1-手动下载-引入idea" aria-hidden="true">#</a> 1.2.1 手动下载，引入IDEA</h4><ol><li>下载地址： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585371056-272e5ba6-b89d-4778-ad57-8b449a315fae.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=195&amp;id=ud192ddee&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=195&amp;originWidth=663&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=22932&amp;status=done&amp;style=none&amp;taskId=u97e54b03-b8b6-48ff-9f03-f89c1d5fb0d&amp;title=&amp;width=663" alt="image.png" loading="lazy"></li><li>确认版本： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585523578-2d093293-d21e-4162-881c-8af91355d33e.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=591&amp;id=uc9695e40&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=591&amp;originWidth=1244&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=100543&amp;status=done&amp;style=none&amp;taskId=u64ab4ba5-9ff1-41c1-a64c-167095a8f13&amp;title=&amp;width=1244" alt="image.png" loading="lazy"></li></ul></li><li>前往下载页面： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585552553-c34f32c6-5d72-49e3-895b-372da0c3b7a3.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=328&amp;id=ue7141ac7&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=328&amp;originWidth=1192&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=47265&amp;status=done&amp;style=none&amp;taskId=ud5028943-d9b9-4b5e-b0bf-a3feb19d09a&amp;title=&amp;width=1192" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585579394-b5c49ca2-1930-486c-acef-81b5e349e209.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=354&amp;id=uba4d7d7e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=509&amp;originWidth=380&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=27025&amp;status=done&amp;style=none&amp;taskId=u2efe1011-0ce7-457c-9162-98d869280ef&amp;title=&amp;width=264" alt="image.png" loading="lazy">第一个框中的为最新版本，第二个框中的为历史版本</li></ul></li><li>下载源码： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585645762-4b610f74-9e97-4431-8dbf-d1b37cd7775c.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=124&amp;id=u1baa6aeb&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=124&amp;originWidth=886&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=12974&amp;status=done&amp;style=none&amp;taskId=uaf1d3141-ab18-486e-838f-af9b9a8072f&amp;title=&amp;width=886" alt="image.png" loading="lazy"></li></ul></li><li>下载后找个位置存放即可。</li></ul></li><li>IDEA中创建普通Java工程【不同版本IDEA的步骤不同】 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585880731-161341f2-b359-4106-a85f-cb8067441092.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=120&amp;id=u39f15434&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=120&amp;originWidth=507&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=13442&amp;status=done&amp;style=none&amp;taskId=u10d96916-d457-4ab5-866f-273e2bcf6d8&amp;title=&amp;width=507" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585956301-06ddb16f-497e-4b62-88a8-e828737b28c0.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=467&amp;id=uc8d7f279&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=467&amp;originWidth=719&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=37442&amp;status=done&amp;style=none&amp;taskId=u753657d4-a238-4082-a23f-9ea488ca163&amp;title=&amp;width=719" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657585969439-b227f75a-d6bb-4ee7-9f29-8c6fc2988652.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=467&amp;id=u87d0fe51&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=467&amp;originWidth=719&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=10184&amp;status=done&amp;style=none&amp;taskId=u868f6cc9-0115-4744-bbd8-00a863e7288&amp;title=&amp;width=719" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657586107785-7c5238eb-3a29-4249-b914-ba2210943876.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=438&amp;id=u1c2e7f17&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=467&amp;originWidth=719&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=25643&amp;status=done&amp;style=none&amp;taskId=u39499c23-04b5-475d-8069-8c3d038c49d&amp;title=&amp;width=675" alt="image.png" loading="lazy"><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657586174732-29044663-bbfa-4a49-8ea8-c4614a144fc0.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=255&amp;id=u6975d7fb&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=255&amp;originWidth=259&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4148&amp;status=done&amp;style=none&amp;taskId=u67630f40-eddb-4623-8b6f-1b563bf1c35&amp;title=&amp;width=259" alt="image.png" loading="lazy"></li><li>文件结构说明：通过本地文件存储结构，可以看到项目名称【1】spring只是一个虚拟的文件管理路径，模块【3】spring5是真实的文件路径。同时由于项目名称和模块名称不一致，所以IDEA自动创建了模块的本地存放路径【4】，【2】的直接子路径下也没有src目录。即如果采取【1】【3】同名的方式，则不会创建【4】路径，而是【4】=【2】，同时【2】的直接子路径下也会生成src目录。——原因为IDEA工具的项目、模块关系设计决定。</li></ul></li></ul></li><li>导入jar包作为lib库 <ul><li>spring5下新建libs文件夹，作为本模块的依赖库 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657586679893-d156709e-61b7-48c0-81a7-384b483df8f1.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=81&amp;id=ue980873e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=81&amp;originWidth=290&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4152&amp;status=done&amp;style=none&amp;taskId=u2cff0517-d8cd-44cb-9ad8-4b1a0f2c2f1&amp;title=&amp;width=290" alt="image.png" loading="lazy"></li></ul></li><li>将spring5的核心jar包拷贝至libs目录 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657586747768-f8178120-c044-426e-9586-175e36c41bd8.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=117&amp;id=uac5ece34&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=117&amp;originWidth=319&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4702&amp;status=done&amp;style=none&amp;taskId=ubf4af99d-2ef5-44ee-abdf-4be152abc09&amp;title=&amp;width=319" alt="image.png" loading="lazy"></li><li>这里还引入了<code>commons-logging.jar</code>，这是一个apache的一个日志文件，spring5需要这个文件，下载引入即可。下载地址：</li></ul></li><li>将jar包作为【模块】依赖库——也可以作为项目依赖库，看具体需求 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657586898175-dab2b20d-a345-4401-bb03-2fe80bbcac5b.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=532&amp;id=uf2a98629&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=532&amp;originWidth=481&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=37376&amp;status=done&amp;style=none&amp;taskId=ubfd71d89-4c7a-498d-a598-9afb8a6032a&amp;title=&amp;width=481" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657586926066-c6f2e5be-c4cf-48eb-96ac-74da1a1cddfc.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=181&amp;id=u6cd12a47&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=181&amp;originWidth=394&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=9638&amp;status=done&amp;style=none&amp;taskId=u3084fe3c-aee3-4e09-af60-22ab80aac11&amp;title=&amp;width=394" alt="image.png" loading="lazy"></li><li>注意：这样添加的5个包会用一个名字。单独一个一个添加可以创建5个名字。</li></ul></li></ul></li></ol><h4 id="_1-2-2-基于maven构建" tabindex="-1"><a class="header-anchor" href="#_1-2-2-基于maven构建" aria-hidden="true">#</a> 1.2.2 基于maven构建</h4><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1659490576295-f6c74327-0bc9-4112-a5de-d2f4e48c98a1.png#clientId=u56ab9f1d-5868-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=492&amp;id=u63f89f00&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=615&amp;originWidth=721&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=113379&amp;status=done&amp;style=none&amp;taskId=uc9bb9f76-dd93-4b79-9f0f-e934f8b330c&amp;title=&amp;width=576.8" alt="image.png" loading="lazy"><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1659490612683-f6983e12-5c6c-40a1-9f8b-15312988164c.png#clientId=u56ab9f1d-5868-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=492&amp;id=u62ed95cf&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=615&amp;originWidth=721&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=22152&amp;status=done&amp;style=none&amp;taskId=u1b3cdd8b-79fe-4820-a898-84b2a991037&amp;title=&amp;width=576.8" alt="image.png" loading="lazy"> 引入依赖</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>iceriver.spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-structre<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--        必须引入--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--        按需引入juint--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1659491064409-bf13645f-aacd-4611-9975-1c49a37d2f99.png#clientId=u56ab9f1d-5868-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=124&amp;id=u96fe3e03&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=155&amp;originWidth=409&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=14986&amp;status=done&amp;style=none&amp;taskId=u91ff3d7f-cfb1-4da4-870a-7eff6c3c347&amp;title=&amp;width=327.2" alt="image.png" loading="lazy"> 基于配置文件时，配置文件写在resources路径下，名称任意。</p><h3 id="_1-3-体验spring创建对象" tabindex="-1"><a class="header-anchor" href="#_1-3-体验spring创建对象" aria-hidden="true">#</a> 1.3 体验spring创建对象</h3><h4 id="_1-3-1-使用配置文件方式" tabindex="-1"><a class="header-anchor" href="#_1-3-1-使用配置文件方式" aria-hidden="true">#</a> 1.3.1 使用配置文件方式</h4><ol><li>编写类及方法【任意】。 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657587328473-59b61dec-ddf6-4111-a86b-ba07c6c615f6.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=236&amp;id=ud3c6c6ce&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=236&amp;originWidth=849&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=36932&amp;status=done&amp;style=none&amp;taskId=ufcd36e06-9b42-4201-a039-44d8cedfed9&amp;title=&amp;width=849" alt="image.png" loading="lazy"></li></ul></li><li>创建配置文件（位置选择src目录，名字任意）： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657587965497-207406c7-9a5d-4ebb-bdf9-2a228e5b51a6.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=481&amp;id=u3ad79f58&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=481&amp;originWidth=751&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=73812&amp;status=done&amp;style=none&amp;taskId=u45e588e5-7071-41e1-8070-7d7320fafae&amp;title=&amp;width=751" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657588009316-bc01c60a-20c8-42cc-b3f1-b8805dd9d919.png#clientId=u7ad9d3e0-adc3-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=153&amp;id=u885b8d13&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=153&amp;originWidth=607&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=30610&amp;status=done&amp;style=none&amp;taskId=u89e42e60-de08-4ed2-91a8-2de8475be92&amp;title=&amp;width=607" alt="image.png" loading="lazy"><ul><li>这个id不是要创建的对象名字，而是通过这个id可以找到对应的类，相当于属性名。</li></ul></li></ul></li><li>创建测试文件：</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">iceriver<span class="token punctuation">.</span>spring</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w
 * <span class="token keyword">@date</span>: 2022/7/12 8:52
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;lalalla&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;User{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;name=&#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">&#39;\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, password=&#39;&quot;</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token char">&#39;\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="第2章-ioc及ioc操作" tabindex="-1"><a class="header-anchor" href="#第2章-ioc及ioc操作" aria-hidden="true">#</a> 第2章 IoC及IoC操作</h2><h3 id="_2-1-ioc简述" tabindex="-1"><a class="header-anchor" href="#_2-1-ioc简述" aria-hidden="true">#</a> 2.1 IoC简述</h3><h4 id="_2-1-1-ioc概念" tabindex="-1"><a class="header-anchor" href="#_2-1-1-ioc概念" aria-hidden="true">#</a> 2.1.1 IoC概念</h4><ol><li>含义：控制反转</li><li>作用：把对象创建和对象之间的调用过程，交给Spring进行管理</li><li>目的：降低耦合度</li><li>底层：xm解析、工厂模式、反射</li></ol><h4 id="_2-2-2-底层原理" tabindex="-1"><a class="header-anchor" href="#_2-2-2-底层原理" aria-hidden="true">#</a> 2.2.2 底层原理</h4><ol><li>在xml文件中配置类的路径classPath</li><li>使用类工厂创建对象 <ul><li>解析xml，读取classPath</li><li>使用classPath，利用反射机制<code>Class.forName(classPath)</code>获取类的对象</li><li>使用<code>newInstance()</code>实例化对象</li></ul></li></ol><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658023894211-a68093e0-917a-46f4-903d-945304f195b9.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u355666bc&amp;margin=[object Object]&amp;originHeight=392&amp;originWidth=1080&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u0d86aed7-7055-4ed4-9317-89db972d2c5&amp;title=" alt="" loading="lazy"></p><h4 id="_2-2-3-ioc接口" tabindex="-1"><a class="header-anchor" href="#_2-2-3-ioc接口" aria-hidden="true">#</a> 2.2.3 IoC接口</h4><ol><li>IoC思想基于IoC容器，该容器的底层就是对象工厂 <ul><li>容器：为某种特定组件的运行提供必要支持的软件环境</li><li>IoC容器：管理所有轻量级的JavaBean组件，提供生命周期管理、配置和组装服务、AOP支持、建立在AOP基础上的声明式事务等。</li></ul></li><li>IoC容器的实现方式（接口） <ul><li><code>BeanFactory</code>接口：IOC的基本实现，Spring内部使用，不建议开发人员使用 <ul><li>加载配置文件时不会创建，获取对象时采取创建</li></ul></li><li><code>AplicationContext</code>接口：<code>BeanFactory</code>的子接口，功能更强大，给开发人员使用 <ul><li>加载配置文件时即创建对象</li></ul></li></ul></li><li><code>ApplicationContext</code>的两个重要实现类：（取决于使用哪种方式加载xml配置文件）</li></ol><blockquote><ul><li>IDEA中ctrl+h打开层次结构图</li></ul></blockquote><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657704999918-3ea251cd-a5e4-448f-b0f8-537d0ad5e02a.png#clientId=u5557f9b0-ca07-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=266&amp;id=ucfb7e967&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=266&amp;originWidth=594&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=43546&amp;status=done&amp;style=none&amp;taskId=uf7a35c24-7245-47fb-811f-ef938a3a1cf&amp;title=&amp;width=594" alt="image.png" loading="lazy"></li><li><code>ClassPathXmApplicationContext</code></li><li><code>FileSystemXmlApplicationContext</code></li><li>基于注解的开发使用<code>AnnotationConfigApplicationContext</code></li></ul><ol start="4"><li><code>BeanFactory</code>： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657705164789-99bbb5aa-b4eb-4828-b677-9e01e5a28ccc.png#clientId=u5557f9b0-ca07-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=411&amp;id=u33204ab1&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=411&amp;originWidth=619&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=66919&amp;status=done&amp;style=none&amp;taskId=ucedf4a1c-ee9f-4fa2-97eb-c4a28650c9c&amp;title=&amp;width=619" alt="image.png" loading="lazy"></li></ul></li></ol><h4 id="_2-2-4-bean管理" tabindex="-1"><a class="header-anchor" href="#_2-2-4-bean管理" aria-hidden="true">#</a> 2.2.4 Bean管理</h4><ol><li>Bean管理指：Spring创建对象、Spring注入属性</li><li>操作方式：基于xml配置文件实现、基于注解方式实现</li></ol><h3 id="_2-2-基于xml操作——bean管理" tabindex="-1"><a class="header-anchor" href="#_2-2-基于xml操作——bean管理" aria-hidden="true">#</a> 2.2 基于xml操作——Bean管理</h3><h4 id="_2-2-1-创建对象" tabindex="-1"><a class="header-anchor" href="#_2-2-1-创建对象" aria-hidden="true">#</a> 2.2.1 创建对象</h4><ol><li>xml文件中：使用<code>&lt;bean&gt;</code>标签，<code>id</code>指定该类的名字，<code>class</code>指向类的全路径 <ul><li><code>&lt;bean id=&quot;user&quot; class=&quot;iceriver.spring.User&quot;&gt;&lt;/bean&gt;</code></li></ul></li><li>要使用该对象的类中：加载类对象： <ul><li><code>BeanFactory context = new ClassPathXmlApplicationContext(&quot;iceriver.xml&quot;);</code></li><li>【建议】<code>ApplicationContext context = new ClassPathXmlApplicationContext(&quot;iceriver.xml&quot;);</code></li></ul></li><li>要使用该对象的类中：创建对象（默认使用类的无参构造器）： <ul><li><code>User user = context.getBean(&quot;user&quot;, User.class);</code></li><li>没有无参构造器/无参构造器不可用时会报错。——xml文件找不到类</li></ul></li></ol><h4 id="_2-2-2-注入属性" tabindex="-1"><a class="header-anchor" href="#_2-2-2-注入属性" aria-hidden="true">#</a> 2.2.2 注入属性</h4><ol><li><code>DI</code>：依赖注入，即注入属性</li><li>方式一：使用属性的setter <ul><li><strong>【前提】：JavaBean的类中声明了对应属性的setter方法、同时无参构造器可用。</strong></li><li>xml文件中配置<code>&lt;bean&gt;</code>标签的子标签<code>&lt;property&gt;</code><ul><li><code>name</code>表示给哪个属性赋值</li><li><code>value</code>表示该属性的注入的值</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657803988358-7bcd1625-9819-4888-9636-1cd5b4870f54.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=86&amp;id=u33317c92&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=86&amp;originWidth=436&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=12985&amp;status=done&amp;style=none&amp;taskId=ue0b157da-0f03-4107-b384-2ff87afdc04&amp;title=&amp;width=436" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657803994706-42275894-d215-40ac-af09-1a2ef2aa36ed.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=40&amp;id=u8042f1dc&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=40&amp;originWidth=310&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=6863&amp;status=done&amp;style=none&amp;taskId=u4969947d-0a1b-405c-9230-71dffc743b0&amp;title=&amp;width=310" alt="image.png" loading="lazy"></li><li><code>name</code>是<code>&lt;poperty&gt;</code>的必需属性，<code>value</code>属性可以作为<code>&lt;property&gt;</code>的子标签设置</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657843762710-1c62ae1c-4b2c-4a08-b285-891102daec56.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=133&amp;id=uf1618f5e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=133&amp;originWidth=446&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=15728&amp;status=done&amp;style=none&amp;taskId=udf9a39f9-2a7d-464d-925f-b7c662210e7&amp;title=&amp;width=446" alt="image.png" loading="lazy"></li></ul></li></ul></li></ol><ul><li>方式二：使用带参构造器 <ul><li>【前提】：JavaBean中有对应属性的构造器方法，同时也显式地声明<strong>无参构造器，用于xml文件找到对应地类文件。</strong></li><li>xml文件中配置<code>&lt;bean&gt;</code>标签的子标签<code>&lt;constructor-arg&gt;</code><ul><li><code>name</code>表示给哪个属性赋值；也可以使用索引形式，从0开始</li><li><code>value</code>表示该属性的注入的值</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657804220136-91c30dc4-8c6f-4b85-bdd4-24a7a77046d4.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=86&amp;id=u2ff83144&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=86&amp;originWidth=540&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=14068&amp;status=done&amp;style=none&amp;taskId=ue11c1d82-ab80-47af-aea3-752234c9e1e&amp;title=&amp;width=540" alt="image.png" loading="lazy"></li></ul></li></ul></li></ul><ol start="3"><li>方式三：p名称空间注入：对基于xml配置文件注入属性的优化 <ul><li>配置<code>&lt;beans&gt;</code>标签的p名称空间： <ul><li><code>&lt;beans xmlns:p=&quot;http://www.springframework.org/schema/p&quot;&gt;</code></li></ul></li><li>给<code>&lt;bean&gt;</code>标签添加属性：<code>&lt;bean id=&quot;&quot; class=&quot;&quot; p:name1=&quot;&quot; p:name2=&quot;&quot;&gt;</code><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657804422238-34608b4d-9d34-445e-94ca-38ac51663112.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=23&amp;id=u5a01761c&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=23&amp;originWidth=683&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=6284&amp;status=done&amp;style=none&amp;taskId=ucc452218-5530-452e-8aa6-d6af68fe9ad&amp;title=&amp;width=683" alt="image.png" loading="lazy"></li></ul></li></ul></li><li>xml注入其他类型的属性： <ul><li><code>null</code>值： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657804616695-c8cff19d-fa02-4695-aa0d-da12dbbbe83e.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=141&amp;id=uadead285&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=141&amp;originWidth=377&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=14499&amp;status=done&amp;style=none&amp;taskId=u981085b1-33fb-45d8-a92a-b6c1066d06d&amp;title=&amp;width=377" alt="image.png" loading="lazy"></li></ul></li><li>特殊字符值<code>&gt;、&lt;</code>： <ul><li>使用转义字符：<code>&amp;lt;</code>代表<code>&lt;</code>，<code>&amp;gt;</code>代表<code>&gt;</code></li><li>将带<code>&gt;、&lt;</code>的文本写入至<code>CDATA</code><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657843537367-f04a875a-65c6-4120-be1e-f5f559f0b52c.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=176&amp;id=uae1420eb&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=176&amp;originWidth=373&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=17500&amp;status=done&amp;style=none&amp;taskId=u3c8bd612-d4dc-46eb-94d2-c5b808cb4c9&amp;title=&amp;width=373" alt="image.png" loading="lazy"></li><li>如果有回车符也会原样输出。</li></ul></li></ul></li></ul></li><li>注入属性——外部Bean <ul><li>原始方法：在service类中创建dao对象，使用dao对象调用其方法</li><li>注入方式：在service类中，把dao当作私有化属性，并创建其setter，在xml文件中给service类进行注入属性配置。 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657845341320-00e3058e-87fc-4463-ae07-62a2f9ba9146.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=94&amp;id=u1121e493&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=94&amp;originWidth=545&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=15417&amp;status=done&amp;style=none&amp;taskId=u5fc936eb-cd5d-4b85-8b58-2ff2fe8f64a&amp;title=&amp;width=545" alt="image.png" loading="lazy"></li></ul></li></ul></li><li>注入属性——内部Bean和级联赋值 <ul><li>内部Bean：一个<code>&lt;bean&gt;</code>中嵌套了另一个<code>&lt;bean&gt;</code><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657847972349-c1e2481d-5bbc-4e70-908c-8aeb8daad4a3.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=194&amp;id=eGIAf&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=194&amp;originWidth=495&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=30669&amp;status=done&amp;style=none&amp;taskId=u6ac159df-ac09-434a-ae46-806b1a41838&amp;title=&amp;width=495" alt="image.png" loading="lazy"></li><li>dept2是Dept的私有属性，dept3是Emp的私有属性。</li></ul></li><li>级联赋值：配置嵌套配置【上面的配置也是一种级联赋值】 <ul><li>方式一：<img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657848541793-0d9fd67b-eca1-41c1-906f-187788241c6e.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=152&amp;id=K8jEl&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=181&amp;originWidth=431&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=28214&amp;status=done&amp;style=none&amp;taskId=u47a26d7d-0c91-452e-aac7-8f83b0340a8&amp;title=&amp;width=362" alt="image.png" loading="lazy"></li><li>方式二：<img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657849114046-f130b8d8-e078-4ece-be99-8dac614b752c.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=168&amp;id=ua450e7c8&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=199&amp;originWidth=528&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=34069&amp;status=done&amp;style=none&amp;taskId=u0640a97c-7bed-4de7-90c8-42d600aceec&amp;title=&amp;width=446" alt="image.png" loading="lazy"></li><li>方式二中，要使用<code>dept3.dept2</code>，还得给<code>Emp</code>类中的<code>Dept</code>属性类设置getter，否则会找不到。这样设置后，注释内容（安保部）会失效。</li></ul></li></ul></li><li>注入数组、集合类属性： <ul><li>注入数组： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657850736007-adf00640-8e5a-49f9-af5e-ac8acdb4b930.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=160&amp;id=u55ae6dd1&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=194&amp;originWidth=529&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=19913&amp;status=done&amp;style=none&amp;taskId=u4ba81719-fb58-489e-a69d-0dc1389a82c&amp;title=&amp;width=435" alt="image.png" loading="lazy"></li></ul></li><li>注入List集合： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657851126547-36113e0b-b399-4fd6-97df-69c0b90175a1.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=151&amp;id=uaeb0755a&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=151&amp;originWidth=247&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=10756&amp;status=done&amp;style=none&amp;taskId=ub05bfd8b-74c3-4758-b447-2b73fb69b81&amp;title=&amp;width=247" alt="image.png" loading="lazy"></li></ul></li><li>注入Map类型集合： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657851115630-8d6b44ef-b610-4491-bb8f-b07d254b6c06.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=133&amp;id=ub97ff9f9&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=133&amp;originWidth=397&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=12482&amp;status=done&amp;style=none&amp;taskId=u24051865-a9f6-4ad4-90b3-74a420c634e&amp;title=&amp;width=397" alt="image.png" loading="lazy"></li></ul></li><li>注入Set类型集合： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657851206244-bd976f45-0ea8-4731-8739-9e580b3ad4d5.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=132&amp;id=ud924cf1f&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=132&amp;originWidth=267&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=9948&amp;status=done&amp;style=none&amp;taskId=u4f87c84c-68ac-41ed-b37c-4365f49b395&amp;title=&amp;width=267" alt="image.png" loading="lazy"></li></ul></li><li>注入指定类型【List】的集合： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657853347337-bc4c3282-b535-448b-84a7-8965e4e5cf87.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=297&amp;id=u794785d8&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=397&amp;originWidth=578&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=55872&amp;status=done&amp;style=none&amp;taskId=u4ff69d62-a973-49cd-bb98-52ed48a382e&amp;title=&amp;width=432" alt="image.png" loading="lazy"></li></ul></li><li>注入指定类型【Map】的集合： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657854908320-c151e9b3-4dff-47c7-9b40-93726821cf40.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=298&amp;id=u3a65794c&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=375&amp;originWidth=577&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=45015&amp;status=done&amp;style=none&amp;taskId=u53c48e9d-ee5e-4c89-a016-f947eac7668&amp;title=&amp;width=458" alt="image.png" loading="lazy"></li></ul></li><li>提取集合类型的属性注入： <ul><li>配置util空间：<img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657854548854-b2202eca-d1d0-478d-9424-58aaf935112e.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=111&amp;id=u75a1bffd&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=111&amp;originWidth=1064&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=26353&amp;status=done&amp;style=none&amp;taskId=uc842ddf2-dea7-405a-b6c5-4aaa5ec027e&amp;title=&amp;width=1064" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657855022241-dc69ad6a-da3e-43e4-87e2-600f48e7ac54.png#clientId=u045da19a-733e-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=451&amp;id=u8f5bab2e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=574&amp;originWidth=636&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=78346&amp;status=done&amp;style=none&amp;taskId=u0dccef1e-d463-495c-8c1d-e095f363a5e&amp;title=&amp;width=500" alt="image.png" loading="lazy"></li></ul></li><li>注意事项：注入数组、List集合、set集合的配置中，<code>&lt;array&gt;</code>、<code>&lt;list&gt;</code>、<code>&lt;set&gt;</code>三个标签可互换，其中，<code>&lt;set&gt;</code>标签包裹的<code>&lt;value&gt;</code>值如果有重复时，重复项只取一项。</li></ul></li></ol><h4 id="_2-2-3-factorybean" tabindex="-1"><a class="header-anchor" href="#_2-2-3-factorybean" aria-hidden="true">#</a> 2.2.3 FactoryBean</h4><ol><li>Spring有两种<code>Bean</code>，一种是普通<code>Bean</code>，另一种是<code>FactoryBean</code><ul><li>普通<code>Bean</code>：xml文件中class配置的是什么类，创建实例的时候就返回该类型</li><li>工厂<code>Bean</code>（<code>FactoryBean</code>）：xml文件中class配置的类型，和创建实例时返回的类型可以不一致。</li></ul></li><li><code>FactoryBean</code>的使用： <ul><li>创建普通Bean时，让其实现<code>FactoryBean</code>接口。</li><li><code>FactoryBean</code>使用泛型，指定需要创建实例时，返回的类型。</li><li>在实现<code>FactoryBean</code>的<code>getObject()</code>方法中，将返回值类型指定为传入的泛型类 <ul><li><code>getObject()</code>：通过一个对象交给ioc容器管理</li><li><code>getObjectType()</code>：设置所提供对象的类型</li><li><code>isSingleton()</code>：所提供的对象是否单例</li></ul></li><li>此时得到的类型不再是实现<code>FactoryBean</code>接口的类的类型，而是传给<code>FactoryBean</code>接口范型的类型（即<code>FactoryBean</code>方法返回的类型。获取实现<code>FactoryBean</code>接口的类对象会出错。</li></ul></li></ol><h4 id="_2-2-4-bean作用域" tabindex="-1"><a class="header-anchor" href="#_2-2-4-bean作用域" aria-hidden="true">#</a> 2.2.4 Bean作用域</h4><ol><li>Spring中，默认情况下，创建的Bean实例默认是单实例——内存中只有一个实例对象</li><li>设置多实例： <ul><li><code>&lt;bean&gt;</code>标签设置<code>scope</code>属性 <ul><li><code>singleton</code>：单实例，默认值，加载xml配置文件时，即创建对象</li><li><code>prototype</code>：多实例，调用<code>getBean()</code>时创建多实例对象</li><li><code>request</code>：每次HTTP请求时创建实例</li><li><code>session</code>：每个会话中创建实例</li></ul></li></ul></li></ol><h4 id="_2-2-5-bean生命周期-共7步" tabindex="-1"><a class="header-anchor" href="#_2-2-5-bean生命周期-共7步" aria-hidden="true">#</a> 2.2.5 Bean生命周期（共7步）</h4><ol><li>通过构造器创建 bean 实例（无参数构造） <ul><li>读取配置文件，创建Class类对象</li></ul></li><li>为 bean 的属性设置值和对其他 bean 引用（调用 set 方法） <ul><li>读取配置文件，创建Class类对象</li></ul></li><li>把 bean 实例传递 bean 后置处理器的方法 <code>postProcess**Before**Initialization()</code><ul><li>要求类实现<code>BeanPostProcessor</code>接口</li><li>实现<code>BeanPostProcessor</code>接口的类的配置，会导致本配置文件中的所有类都添加后置处理器</li></ul></li><li>调用 bean 的初始化的方法（需要进行配置初始化的方法） <ul><li><code>&lt;bean&gt;</code>须配置属性<code>init-method = &quot;initMethod()&quot;</code>——方法名任意</li></ul></li><li>把 bean 实例传递 bean 后置处理器的方法 <code>postProcess**After**Initialization()</code></li><li>bean 可以使用了（对象获取到了） <ul><li>通过Class对象创建实例对象完毕。</li></ul></li><li>当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法） <ul><li><code>&lt;bean&gt;</code>须配置属性<code>destory-method = &quot;destoryMethod()&quot;</code>——方法名任意</li><li>类中显式调用<code>context.close()</code>——<code>context</code>是根据xml文件获得的Class类对象</li></ul></li></ol><h4 id="_2-2-6-xml自动装配" tabindex="-1"><a class="header-anchor" href="#_2-2-6-xml自动装配" aria-hidden="true">#</a> 2.2.6 xml自动装配</h4><ol><li>根据指定的装配规则（属性名称或属性类型），Spring自动将匹配的属性值进行注入</li><li><code>&lt;bean&gt;</code>标签配置<code>autowrite</code>属性 <ul><li><code>byName</code>：根据属性名注入，要求外部bean的id值，和要注入的类中的属性名称一样</li><li><code>byType</code>：根据属性类型注入。</li></ul></li></ol><h4 id="_2-2-7-使用配置文件装配" tabindex="-1"><a class="header-anchor" href="#_2-2-7-使用配置文件装配" aria-hidden="true">#</a> 2.2.7 使用配置文件装配</h4><ol><li>xml文件直接配置Druid连接池： <ul><li>添加druid连接池jar包</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657865726656-271c8655-9b93-4e47-8646-5264d883c0ed.png#clientId=ueb4d9d1f-daaf-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=127&amp;id=uce6b9e34&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=127&amp;originWidth=659&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=27357&amp;status=done&amp;style=none&amp;taskId=u5716105f-a090-419d-bc6a-59bc4abbfe2&amp;title=&amp;width=659" alt="image.png" loading="lazy"></li></ul></li><li>xml读取配置文件进行配置Druid连接池 <ul><li>新建配置文件<code>jdbc.properties</code><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657865908893-41bdc5dc-785d-4569-8e1e-e07ff1b1f1b6.png#clientId=ueb4d9d1f-daaf-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=85&amp;id=u5e95c214&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=85&amp;originWidth=379&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=13347&amp;status=done&amp;style=none&amp;taskId=u44cdc985-6cfe-4289-8cca-26b24f60f1a&amp;title=&amp;width=379" alt="image.png" loading="lazy"></li></ul></li><li>引入名称空间： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657866162982-c2b0801d-d21c-49c0-849e-20603eac00a4.png#clientId=ueb4d9d1f-daaf-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=109&amp;id=uc141d691&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=109&amp;originWidth=1134&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=25349&amp;status=done&amp;style=none&amp;taskId=u641c49b6-18c2-4a7b-a98c-528a1fe0a01&amp;title=&amp;width=1134" alt="image.png" loading="lazy"></li></ul></li><li>引入配置文件 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657866236168-89937a54-f005-4242-9518-24c213100d71.png#clientId=ueb4d9d1f-daaf-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=45&amp;id=u8a183297&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=45&amp;originWidth=826&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=9970&amp;status=done&amp;style=none&amp;taskId=ub3af7ddd-601a-4f4d-8593-0f854101cfa&amp;title=&amp;width=826" alt="image.png" loading="lazy"></li></ul></li><li>使用表达式： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657866398333-4dc93e5c-045f-48c5-a6dd-bf314a738c30.png#clientId=ueb4d9d1f-daaf-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=134&amp;id=u5dc2cd55&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=152&amp;originWidth=656&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=29415&amp;status=done&amp;style=none&amp;taskId=u027825dc-843c-47cf-905f-1a96517b37f&amp;title=&amp;width=579" alt="image.png" loading="lazy"></li><li><code>{}</code>中的值要与<code>.properties</code>配置文件中的名称一致。</li></ul></li></ul></li></ol><h3 id="_2-3-基于注解操作——bean管理" tabindex="-1"><a class="header-anchor" href="#_2-3-基于注解操作——bean管理" aria-hidden="true">#</a> 2.3 基于注解操作——Bean管理</h3><h4 id="_2-3-1-spring中bean管理的注解" tabindex="-1"><a class="header-anchor" href="#_2-3-1-spring中bean管理的注解" aria-hidden="true">#</a> 2.3.1 Spring中Bean管理的注解</h4><ol><li><code>@Component</code></li><li><code>@Service</code></li><li><code>@Controller</code></li><li><code>@Repostory</code></li></ol><ul><li>注意：上述四个注解作用一致，只是针对不同JavaBean进行语义化使用</li></ul><h4 id="_2-3-2-基于注解创建对象" tabindex="-1"><a class="header-anchor" href="#_2-3-2-基于注解创建对象" aria-hidden="true">#</a> 2.3.2 基于注解创建对象</h4><ol><li>引入依赖<code>spring-aop-5.2.6.RELEASE</code></li><li>引入名称空间： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657866162982-c2b0801d-d21c-49c0-849e-20603eac00a4.png#clientId=ueb4d9d1f-daaf-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=109&amp;id=EucWR&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=109&amp;originWidth=1134&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=25349&amp;status=done&amp;style=none&amp;taskId=u641c49b6-18c2-4a7b-a98c-528a1fe0a01&amp;title=&amp;width=1134" alt="image.png" loading="lazy"></li></ul></li><li>开启组件扫描： <ul><li>方式一：逗号分隔多个包 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657869313494-926314e6-4c16-4f49-9927-793809fd030e.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=24&amp;id=u8b3684a3&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=24&amp;originWidth=892&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=7231&amp;status=done&amp;style=none&amp;taskId=uc5ba5e91-1dac-45a6-b3fb-f73aafd4a48&amp;title=&amp;width=892" alt="image.png" loading="lazy"></li></ul></li><li>方式二：扫描上级包 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657869345631-2b60a965-366c-4c0a-9f89-dac6ef4e22f5.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=29&amp;id=u50227659&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=29&amp;originWidth=658&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=6710&amp;status=done&amp;style=none&amp;taskId=u59a2405f-d2c5-4603-8fce-315d185a551&amp;title=&amp;width=658" alt="image.png" loading="lazy"></li></ul></li></ul></li><li>配置注解： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657870018787-0411d632-cd24-46e6-b870-ad1adebe2bd8.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=50&amp;id=u72764d68&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=62&amp;originWidth=557&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=16355&amp;status=done&amp;style=none&amp;taskId=u40a64346-5379-436c-9503-e366e59f988&amp;title=&amp;width=451" alt="image.png" loading="lazy"></li></ul></li><li>组件扫描配置 <ul><li>设置扫描指定注解为<code>Controller</code>的类 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657871532541-0520417a-986f-4b12-9fd3-0b2315e2b6a9.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=63&amp;id=dEvnk&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=63&amp;originWidth=833&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=18004&amp;status=done&amp;style=none&amp;taskId=u955c6a0d-7813-4241-9f29-cc8a08b9b7c&amp;title=&amp;width=833" alt="image.png" loading="lazy"></li></ul></li><li>设置不扫描指定注解为<code>Controller</code>的类 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657871701067-1b01e878-9603-4f9e-8178-ca1693f60f56.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=65&amp;id=u4afd6a90&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=65&amp;originWidth=836&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=18219&amp;status=done&amp;style=none&amp;taskId=u260180b8-9fb2-4c61-8252-ef583cd5a85&amp;title=&amp;width=836" alt="image.png" loading="lazy"></li></ul></li></ul></li></ol><h4 id="_2-3-3-属性注入" tabindex="-1"><a class="header-anchor" href="#_2-3-3-属性注入" aria-hidden="true">#</a> 2.3.3 属性注入</h4><ol><li><code>@Autowried</code>：根据属性类型自动装配 <ul><li>在要注入的属性声明上面，添加<code>@Autowired</code></li><li>该属性的setter不是必须</li></ul></li><li><code>@Qualifier</code>：根据属性名进行注入，需要配合<code>@Autowired</code>使用 <ul><li>适用于<code>@Autowried</code>查找到多个实现类的情况</li><li>给被注入的类指定<code>value</code>值 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657872690337-ae387c2e-76f8-4529-b31e-ffa0a9243185.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=45&amp;id=u1e8274cf&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=45&amp;originWidth=380&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=8210&amp;status=done&amp;style=none&amp;taskId=u4940f9f7-eb4e-492e-bc60-38dd2eeeeb2&amp;title=&amp;width=380" alt="image.png" loading="lazy"></li></ul></li><li>在要注入的属性声明上面，添加<code>@Autowired</code>和<code>@Qualifier</code>，给<code>@Qualifier</code>配置<code>value</code>值 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657872867411-85c54bf1-30b5-4271-86f9-f80dcdede43b.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=67&amp;id=u744f47d1&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=67&amp;originWidth=295&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=9560&amp;status=done&amp;style=none&amp;taskId=u6c5d1a8b-ff53-4d00-bc11-0c6fb017c2d&amp;title=&amp;width=295" alt="image.png" loading="lazy"></li></ul></li></ul></li><li><code>@Resource</code>：可以根据类型注入，也可以根据名称注入 <ul><li>在要注入的属性声明上面，添加<code>@Resource</code>——根据类型注入 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657873155350-bfff3198-011f-4712-8e5c-efc50789f124.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=43&amp;id=uacd9e372&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=43&amp;originWidth=210&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4793&amp;status=done&amp;style=none&amp;taskId=ubd863eba-88e7-412f-b7b5-47577b0f21e&amp;title=&amp;width=210" alt="image.png" loading="lazy"></li></ul></li><li>在要注入的属性声明上面，添加<code>@Resource</code>，并配置<code>name</code>属性值——根据类型注入 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657873239839-844909c1-afb7-4d25-b7ef-54467c954124.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=45&amp;id=u1279f323&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=45&amp;originWidth=284&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=7317&amp;status=done&amp;style=none&amp;taskId=uaf09c470-c907-40fd-bc9f-8399c302ad4&amp;title=&amp;width=284" alt="image.png" loading="lazy"></li><li><code>@Resource</code>来源于<code>import javax.annotation.Resource;</code>，所以官方不推荐使用这个。</li></ul></li></ul></li><li><code>@Value</code>：给普通属性注入值 <ul><li>在要注入的属性声明上面，添加<code>@Value</code></li><li>使用<code>value</code>属性设置值 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657873412515-2bae1e15-d3c6-4430-a832-12631f148bcb.png#clientId=uc8368fdc-a6e8-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=41&amp;id=u585283bb&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=41&amp;originWidth=217&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=5492&amp;status=done&amp;style=none&amp;taskId=u324842d7-b0c7-47ff-bf82-937dfe4489e&amp;title=&amp;width=217" alt="image.png" loading="lazy"></li></ul></li></ul></li></ol><h4 id="_2-3-4-完全注解开发" tabindex="-1"><a class="header-anchor" href="#_2-3-4-完全注解开发" aria-hidden="true">#</a> 2.3.4 完全注解开发</h4><ol><li>创建配置类，替代xml配置文件 <ul><li>类的名称任意</li><li>使用<code>@Configuration</code>声明这是一个配置类</li><li>使用<code>@ComponentScan(basePackages = {&quot;iceriver.spring&quot;})</code>指定扫描的基本路径</li></ul></li><li>使用<code>AnnotationConfigApplicationContext</code>加载配置类 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657873971292-77867767-5892-44e0-9ad0-d38c6efbca36.png#clientId=ua700fae1-c7b5-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=85&amp;id=ub77e5459&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=85&amp;originWidth=736&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=20219&amp;status=done&amp;style=none&amp;taskId=ud964e43e-232a-438d-a884-1874021e338&amp;title=&amp;width=736" alt="image.png" loading="lazy"></li></ul></li></ol><h2 id="第3章-aop" tabindex="-1"><a class="header-anchor" href="#第3章-aop" aria-hidden="true">#</a> 第3章 Aop</h2><h3 id="_3-1-aop介绍" tabindex="-1"><a class="header-anchor" href="#_3-1-aop介绍" aria-hidden="true">#</a> 3.1 Aop介绍</h3><h4 id="_3-1-1-aop概念" tabindex="-1"><a class="header-anchor" href="#_3-1-1-aop概念" aria-hidden="true">#</a> 3.1.1 Aop概念</h4><ol><li><code>Aspect Oriented Programming</code>的缩写，意为面向切面编程。</li><li>是一种通过预编译和运行期间动态代理实现程序功能统一维护的一种技术。</li><li>Aop是OOP的延续，也是函数式编程的一种衍生泛型。</li><li>Aop可以对业务逻辑的各个部分进行隔离，使业务逻辑各部分之间的耦合度降低，提高程序的可重用性，提高开发的效率。 <ul><li>不修改源代码的情况下，在主干功能里面添加新功能。</li></ul></li></ol><h4 id="_3-1-2-aop底层原理" tabindex="-1"><a class="header-anchor" href="#_3-1-2-aop底层原理" aria-hidden="true">#</a> 3.1.2 Aop底层原理</h4><ol><li>底层使用了动态代理进行实现，有接口情况下，使用JDK实现动态代理；没有接口情况下，通过CGLIB动态代理。</li><li>JDK实现动态代理：创建接口实现类的代理对象，增强类的方法。 <ul><li>通过<code>java.lang.reflect.Proxy</code>中的<code>newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h)</code><ul><li>loader - 定义代理类的类加载器</li><li>interfaces - 代理类要实现的接口列表</li><li>h - 指派方法调用的调用处理程序：可以使用匿名内部类，也可以创建要被代理的类的实现类。</li></ul></li></ul></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">iceriver<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>jdk</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w
 * <span class="token keyword">@date</span>: 2022/7/16 7:58
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDKProxy</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//        1. 方式一：第三个参数使用匿名内部类</span>
<span class="token comment">//        Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, new InvocationHandler() {</span>
<span class="token comment">//            @Override</span>
<span class="token comment">//            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {</span>
<span class="token comment">//                return null;</span>
<span class="token comment">//            }</span>
<span class="token comment">//        });</span>
<span class="token comment">//      2. 方式二：第三个参数使用代理类</span>
        <span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserDao</span> dao <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">JDKProxy</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> interfaces<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">UserDaoProxy</span><span class="token punctuation">(</span>userDao<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * 创建代理对象
 */</span>
<span class="token keyword">class</span> <span class="token class-name">UserDaoProxy</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">{</span>
<span class="token comment">//    增强原始类功能的代码</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> obj<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserDaoProxy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法之前执行……&quot;</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;，传递的参数：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Object</span> res <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法之后执行&quot;</span> <span class="token operator">+</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>CGLIB实现动态代理：创建当前类的子类代理对象，增强类的方法。</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658023931823-37583d97-e11b-47b3-9370-7da85fa3a055.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u84f558a1&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=354&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=101006&amp;status=done&amp;style=none&amp;taskId=ud588fa3e-b924-4295-a276-08f04ffbe69&amp;title=" alt="image.png" loading="lazy"></p><h4 id="_3-1-3-aop术语" tabindex="-1"><a class="header-anchor" href="#_3-1-3-aop术语" aria-hidden="true">#</a> 3.1.3 Aop术语</h4><ol><li><code>Joinpoint</code>(连接点)：类中可以被增强的方法。</li><li><code>Pointcut</code>(切入点)：实际真正被增强的方法。</li><li><code>Advice</code>(通知/增强)：实际增强的逻辑部分。 <ul><li>前置通知：<code>@Before</code>注解，被代理类的方法【切入点】执行之前执行</li><li>后置通知：<code>AfterReturning</code>注解，返回结果后执行，后于最终通知</li><li>异常通知：<code>@AfterThrowing</code>注解，有异常才执行</li><li>最终通知：<code>@After</code>注解，即使有异常也执行</li><li>环绕通知：<code>@Arround</code>注解，被代理类的方法【切入点】执行之前、之后都执行</li><li>顺序： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657955135197-4bd5fc97-4777-43b8-ba86-b7a7c4c1a030.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=130&amp;id=uacb38238&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=130&amp;originWidth=128&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4005&amp;status=done&amp;style=none&amp;taskId=uc7721295-dd8e-48bc-8f1b-b3aabd61135&amp;title=&amp;width=128" alt="image.png" loading="lazy">【无异常】</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657955192777-1753df02-872c-4053-82fc-41370426bc01.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=80&amp;id=u03feb650&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=80&amp;originWidth=134&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=3148&amp;status=done&amp;style=none&amp;taskId=u580e5e1f-0ade-4ce2-8efa-6c46c4eb1ca&amp;title=&amp;width=134" alt="image.png" loading="lazy">【有异常】</li></ul></li></ul></li><li><code>Aspect</code>(切面)：把<strong>通知</strong>应用到<strong>切入点</strong>的过程。</li><li><code>Target</code>(目标对象)：代理的目标对象(要增强的类)</li><li><code>Weaving</code>(织入)：把切面应用到目标对象来创建新的代理对象的过程。Spring采用动态代理织入，而AspectJ采用编译期织入和类装载期织入。</li><li><code>Proxy(</code>代理)：一个类被AOP织入增强后，就产生一个结果代理类。</li><li><code>Introduction</code>(引介)：引介是一种特殊的通知在不修改类代码的前提下，Introduction可以在运行期为类动态地添加一些方法或Field。</li></ol><h3 id="_3-2-aop操作" tabindex="-1"><a class="header-anchor" href="#_3-2-aop操作" aria-hidden="true">#</a> 3.2 Aop操作</h3><h4 id="_3-2-1-操作方式" tabindex="-1"><a class="header-anchor" href="#_3-2-1-操作方式" aria-hidden="true">#</a> 3.2.1 操作方式</h4><ol><li>Spring框架一般都是基于AspectJ实现Aop操作 <ul><li>AspectJ是独立的Aop框架，与Spring框架配合使用。</li></ul></li><li>前置准备： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657950783435-456db6be-a3f6-4217-8ede-dc8401ea732c.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=351&amp;id=uea83440d&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=351&amp;originWidth=592&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=86158&amp;status=done&amp;style=none&amp;taskId=u5333b299-3a9e-40ee-80f5-a788453d36c&amp;title=&amp;width=592" alt="image.png" loading="lazy"></li></ul></li><li>切入点表达式； <ul><li>作用：直到对哪个类的方法进行增强</li><li>语法结构：<code>excution([权限修饰符][返回类型][类的全路径][方法名称][参数列表])</code><ul><li>权限修饰符可以用<code>*</code>代替，表示任意类型修饰符</li><li>返回类型可以省略</li><li>对指定方法进行增强：<code>excution(* iceriver.spring.aop.User.add(..))</code></li><li>对类中所有方法进行增强：<code>excution(* iceriver.spring.aop.User.*(..))</code></li><li>对包下所有类、所有方法增强：<code>excution(* iceriver.spring.aop.*.*(..))</code></li></ul></li></ul></li></ol><h4 id="_3-2-2-基于注解进行aop操作——-aspectj注解" tabindex="-1"><a class="header-anchor" href="#_3-2-2-基于注解进行aop操作——-aspectj注解" aria-hidden="true">#</a> 3.2.2 基于注解进行Aop操作——（AspectJ注解）</h4><ol><li>创建被增强【被代理】类，在类中定义方法</li><li>创建增强【代理】类，编写增强逻辑</li><li>进行通知配置： <ul><li>xml文件中，开启注解扫描： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657952536141-b2f57698-203b-47f6-b904-c77cf3e9afe8.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=263&amp;id=u9a7f994b&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=263&amp;originWidth=1111&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=50923&amp;status=done&amp;style=none&amp;taskId=u20be26ae-5da4-4821-8637-bd32630d913&amp;title=&amp;width=1111" alt="image.png" loading="lazy"></li></ul></li><li>使用注解创建代理类和被代理类的对象【2.3.2】 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657952708077-5e3b68f0-486d-4d1d-b176-2caa70c88d6c.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=41&amp;id=u90d978af&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=41&amp;originWidth=181&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=3516&amp;status=done&amp;style=none&amp;taskId=u243b9e8b-9f88-4283-93c4-2ffbcfcfa46&amp;title=&amp;width=181" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657952716547-c67eddcf-4bd8-497c-a28e-21c093dba42b.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=43&amp;id=uba4da77c&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=43&amp;originWidth=219&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4180&amp;status=done&amp;style=none&amp;taskId=uef491a3e-5cbe-4cb2-a264-bf6c2c97147&amp;title=&amp;width=219" alt="image.png" loading="lazy"></li></ul></li><li>代理类添加<code>@Aspect</code>注解，生成代理对象 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657952846670-8c947fb2-e6ff-4cc0-a9af-eb1fe18dca78.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=62&amp;id=u2615e32e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=62&amp;originWidth=209&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=5071&amp;status=done&amp;style=none&amp;taskId=ucb7ad2a4-40d4-4d1f-b05f-72f041a94b3&amp;title=&amp;width=209" alt="image.png" loading="lazy"></li></ul></li><li>xml文件中，开启Aspect生成代理对象 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657952950045-95397cb6-fd5e-42f0-8604-ebc89a958726.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=39&amp;id=ub3eda57e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=39&amp;originWidth=269&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=7400&amp;status=done&amp;style=none&amp;taskId=u5ce74c85-bdb3-432a-a716-917468e2a98&amp;title=&amp;width=269" alt="image.png" loading="lazy"></li></ul></li></ul></li><li>配置不同类型的通知： <ul><li>在代理类中，根据不同的通知类型使用对应的注解，并用切入点表达式进行配置</li></ul></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">iceriver<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w
 * <span class="token keyword">@date</span>: 2022/7/16 14:15
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserProxy</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* iceriver.spring.annotation.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//前置通知</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* iceriver.spring.annotation.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//后置通知</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;afterReturning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* iceriver.spring.annotation.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//最终通知</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* iceriver.spring.annotation.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//异常通知</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;afterThrowing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* iceriver.spring.annotation.User.add(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> proceedingJoinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span><span class="token comment">//环绕通知</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;around之前&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proceedingJoinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//被增强的方法执行，如果不写这句，则被代理的类中的方法、以及前置通知不会被执行</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;around之后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657954680757-146950a1-2543-4483-82e6-d405b522ff99.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=127&amp;id=ue5894d72&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=127&amp;originWidth=152&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4112&amp;status=done&amp;style=none&amp;taskId=u11a55e10-9af6-4506-8025-06b4c9b4fdf&amp;title=&amp;width=152" alt="image.png" loading="lazy"></li></ul><ol start="5"><li>重用切入点的定义：将不同通知类型的配置中，相同的切入点表达式进行抽取 <ul><li>定义方法【方法名任意】，抽取相同切入点 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657955531148-bd49669a-352a-4c5a-87db-b2be3840410f.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=118&amp;id=u205669a0&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=118&amp;originWidth=620&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=13428&amp;status=done&amp;style=none&amp;taskId=u59095938-4236-4257-9e42-c30f115d01a&amp;title=&amp;width=620" alt="image.png" loading="lazy"></li></ul></li><li>调用方法，作为切入点使用 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657955577361-f2e0ca5e-f8ea-4c7e-802b-f7d54e389b1a.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=88&amp;id=udb644dda&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=88&amp;originWidth=283&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=11686&amp;status=done&amp;style=none&amp;taskId=u1bba45fd-b1d0-4362-a372-4a2141b5855&amp;title=&amp;width=283" alt="image.png" loading="lazy"></li></ul></li></ul></li><li>被代理类有多个代理类，可以设置优先级 <ul><li>被代理类使用<code>@Order()</code>注解，传入整数，设置优先级，值越小优先级越高。</li><li>设置了的比不设置的高</li></ul></li></ol><h4 id="_3-2-3-完全注解开发" tabindex="-1"><a class="header-anchor" href="#_3-2-3-完全注解开发" aria-hidden="true">#</a> 3.2.3 完全注解开发</h4><ol><li>创建配置类，替代xml配置文件 <ul><li>类的名称任意</li><li>使用<code>@Configuration</code>声明这是一个配置类</li><li>使用<code>@ComponentScan(basePackages = {&quot;iceriver.spring&quot;})</code>指定扫描的基本路径</li><li>使用<code>@EnableAspectJAutoProxy(proxyTargetClass = true)</code>开启Aspect生成代理对象</li></ul></li></ol><h4 id="_3-2-4-基于xml配置文件进行aop操作" tabindex="-1"><a class="header-anchor" href="#_3-2-4-基于xml配置文件进行aop操作" aria-hidden="true">#</a> 3.2.4 基于xml配置文件进行Aop操作</h4><ol><li>创建被增强【被代理】类，在类中定义方法</li><li>创建增强【代理】类，编写增强逻辑</li><li>在xml文件中创建两个类对象 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657956329230-0c70859d-0d4f-4d62-b95f-4f467161179d.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=68&amp;id=u07c823f5&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=68&amp;originWidth=520&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=14821&amp;status=done&amp;style=none&amp;taskId=u53222a1b-7bcb-4277-9091-d187f75b1d1&amp;title=&amp;width=520" alt="image.png" loading="lazy"></li></ul></li><li>在xml文件中配置切入点。 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657956743056-fbc02b9a-7c34-4a7d-b8ff-4f831c36f90c.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=262&amp;id=u066fe86a&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=262&amp;originWidth=701&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=53338&amp;status=done&amp;style=none&amp;taskId=u632412a4-136b-4c2a-9d2c-27ad1eff9b8&amp;title=&amp;width=701" alt="image.png" loading="lazy"></li></ul></li></ol><h2 id="第4章-jdbc-template" tabindex="-1"><a class="header-anchor" href="#第4章-jdbc-template" aria-hidden="true">#</a> 第4章 Jdbc Template</h2><h3 id="_4-1-jdbc-template介绍" tabindex="-1"><a class="header-anchor" href="#_4-1-jdbc-template介绍" aria-hidden="true">#</a> 4.1 Jdbc Template介绍</h3><ol><li>Spring框架对Jdbc进行了封装，简化数据库操作</li><li>使用前提是添加了相关的依赖： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657958620236-ecefef62-6f86-43e3-8dc7-1ce55f6fcc73.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=108&amp;id=u4c6f637e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=108&amp;originWidth=326&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=6357&amp;status=done&amp;style=none&amp;taskId=u5ea589b9-034a-447b-a776-1fe76a1b8bd&amp;title=&amp;width=326" alt="image.png" loading="lazy"></li></ul></li><li>xml中配置Druid： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657959309840-a9688937-baf1-4bb3-83a0-5461710dc90f.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=133&amp;id=u97a58198&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=133&amp;originWidth=743&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=28584&amp;status=done&amp;style=none&amp;taskId=ub27d6642-86ef-47a0-8a31-6b68147bf33&amp;title=&amp;width=743" alt="image.png" loading="lazy"></li></ul></li><li>创建Jdbc Temlate对象并注入数据源信息，完成数据库连接 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657960032304-d99dbb72-6e39-4182-b940-6370919ac174.png#clientId=u159e03e8-ae72-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=241&amp;id=u13f2050e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=241&amp;originWidth=779&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=51295&amp;status=done&amp;style=none&amp;taskId=uf3b92221-2dad-4f8f-8d03-e1d5cb02ccc&amp;title=&amp;width=779" alt="image.png" loading="lazy"></li></ul></li><li>创建Service类、Dao类，在Dao类中注入Jdbc Template对象【Bean的创建对象也依赖注入】，完成持久层持有Jdbc</li></ol><h3 id="_4-2-jdbc-template对象的使用——操作数据库" tabindex="-1"><a class="header-anchor" href="#_4-2-jdbc-template对象的使用——操作数据库" aria-hidden="true">#</a> 4.2 Jdbc Template对象的使用——操作数据库</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token identifier"><span class="token punctuation">`</span>user_db<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">use</span> user_db<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>t_book<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>username<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>ustatus<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-1-添加功能" tabindex="-1"><a class="header-anchor" href="#_4-2-1-添加功能" aria-hidden="true">#</a> 4.2.1 添加功能</h4><ul><li><code>update()</code>： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657964863212-8828d05e-74f4-4687-afa9-d32d8f2b863f.png#clientId=ub6522ba0-2b56-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=27&amp;id=u95af1eb0&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=27&amp;originWidth=491&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4894&amp;status=done&amp;style=none&amp;taskId=u32cfdf7c-b0bb-4508-9bea-73e23e178c8&amp;title=&amp;width=491" alt="image.png" loading="lazy"></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_book values(?,?,?)&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> update <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getUstatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setUstatus</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-2-修改功能" tabindex="-1"><a class="header-anchor" href="#_4-2-2-修改功能" aria-hidden="true">#</a> 4.2.2 修改功能</h4><ul><li><code>update()</code><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657964863212-8828d05e-74f4-4687-afa9-d32d8f2b863f.png#clientId=ub6522ba0-2b56-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=27&amp;id=IqPgj&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=27&amp;originWidth=491&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4894&amp;status=done&amp;style=none&amp;taskId=u32cfdf7c-b0bb-4508-9bea-73e23e178c8&amp;title=&amp;width=491" alt="image.png" loading="lazy"></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_book set username=?,ustatus=? where user_id = ?&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> update <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getUstatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>book<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setUstatus</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-3-删除功能" tabindex="-1"><a class="header-anchor" href="#_4-2-3-删除功能" aria-hidden="true">#</a> 4.2.3 删除功能</h4><ul><li><code>update()</code><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657964863212-8828d05e-74f4-4687-afa9-d32d8f2b863f.png#clientId=ub6522ba0-2b56-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=27&amp;id=p2LLx&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=27&amp;originWidth=491&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=4894&amp;status=done&amp;style=none&amp;taskId=u32cfdf7c-b0bb-4508-9bea-73e23e178c8&amp;title=&amp;width=491" alt="image.png" loading="lazy"></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_book where user_id=?&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> update <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">deleteBook</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-4-查询功能" tabindex="-1"><a class="header-anchor" href="#_4-2-4-查询功能" aria-hidden="true">#</a> 4.2.4 查询功能</h4><ol><li>查询返回某个值： <ul><li><code>queryForObject(sql, 返回值类型.class)</code></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657964960968-b9cab6c3-80c8-4dc5-8b6e-7f818b246286.png#clientId=ub6522ba0-2b56-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=24&amp;id=u4673291d&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=24&amp;originWidth=491&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=6037&amp;status=done&amp;style=none&amp;taskId=u21f8c0c6-feac-44eb-a516-cecf58b0479&amp;title=&amp;width=491" alt="image.png" loading="lazy"></li></ul></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select count(*) from t_book &quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">findCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">findCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>查询返回对象： <ul><li><code>queryForObject(sql, new BeanPropertyRowMapper&lt;&gt;(Book.class), id);</code></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657964985563-c254d4c4-0916-4c69-8485-e16a444d3a94.png#clientId=ub6522ba0-2b56-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=22&amp;id=u8830a2ab&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=22&amp;originWidth=500&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=6085&amp;status=done&amp;style=none&amp;taskId=u427cf121-fe5b-4eb3-9e66-f2faf509266&amp;title=&amp;width=500" alt="image.png" loading="lazy"></li><li>根据id查询一条数据</li></ul></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Book</span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_book where user_id = ?&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> book<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>查询返回对象集合： <ul><li><code>query(sql, new BeanPropertyRowMapper&lt;&gt;(Book.class));</code></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657965023098-bfbbcda9-08da-4f4a-8c17-f33369a6147a.png#clientId=ub6522ba0-2b56-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=20&amp;id=u322eb9d6&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=20&amp;originWidth=486&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=5379&amp;status=done&amp;style=none&amp;taskId=u9aeff8c3-c06c-4b33-ac38-618ab22ae8b&amp;title=&amp;width=486" alt="image.png" loading="lazy"></li><li>可以传入第三个参数，也可以没有。</li></ul></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_book&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> bookList <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bookList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> bookList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-jdbc-template批量操作数据库" tabindex="-1"><a class="header-anchor" href="#_4-3-jdbc-template批量操作数据库" aria-hidden="true">#</a> 4.3 Jdbc Template批量操作数据库</h3><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1657965081400-9f5fcbe4-df3c-4a9d-a03d-3277e2f0c9a4.png#clientId=ub6522ba0-2b56-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=21&amp;id=ubaac011e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=21&amp;originWidth=493&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=5979&amp;status=done&amp;style=none&amp;taskId=u64dbd931-1f66-4b21-98b8-69d3a1c5f02&amp;title=&amp;width=493" alt="image.png" loading="lazy"></p><h4 id="_4-3-1-批量添加" tabindex="-1"><a class="header-anchor" href="#_4-3-1-批量添加" aria-hidden="true">#</a> 4.3.1 批量添加</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">batchAdd</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_book values(?,?,?)&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> add <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">batchUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">batchAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">batchAdd</span><span class="token punctuation">(</span>batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-3-2-批量修改" tabindex="-1"><a class="header-anchor" href="#_4-3-2-批量修改" aria-hidden="true">#</a> 4.3.2 批量修改</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">batchUpdate</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_book set username=?,ustatus=? where user_id = ?&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> update <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">batchUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">batchUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;前端&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">batchUpdate</span><span class="token punctuation">(</span>batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-3-3-批量删除" tabindex="-1"><a class="header-anchor" href="#_4-3-3-批量删除" aria-hidden="true">#</a> 4.3.3 批量删除</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">batchDelete</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_book where user_id=?&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> add <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">batchUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">batchDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;iceriver.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;bookService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BookService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> batchArgs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> book3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    batchArgs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    bookService<span class="token punctuation">.</span><span class="token function">batchDelete</span><span class="token punctuation">(</span>batchArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-事务操作" tabindex="-1"><a class="header-anchor" href="#_4-4-事务操作" aria-hidden="true">#</a> 4.4 事务操作</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> user_db<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>t_accout<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  money <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658020939343-88e3ed2a-5553-4993-b493-2052f3ce3982.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=81&amp;id=u8940aac5&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=81&amp;originWidth=300&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=3297&amp;status=done&amp;style=none&amp;taskId=ub53c824f-cc87-4ac4-979d-010d8d92002&amp;title=&amp;width=300" alt="image.png" loading="lazy"></p><h4 id="_4-4-1-声明式事务管理" tabindex="-1"><a class="header-anchor" href="#_4-4-1-声明式事务管理" aria-hidden="true">#</a> 4.4.1 声明式事务管理</h4><ol><li>Spring中事务管理分为两种方式：编程式、声明式。</li><li>声明式事务管理有两种操作方式：基于注解、xml文件配置。</li><li>声明式事务管理底层Aop原理。</li><li>Sping中进行事务管理的类——事务管理器： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658022350214-ca5f92c1-81c6-4644-a3e5-5818aa9b6b2a.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=138&amp;id=u96a18278&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=138&amp;originWidth=614&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=23181&amp;status=done&amp;style=none&amp;taskId=u656245a7-7645-4349-bcf0-0d1f46b791b&amp;title=&amp;width=614" alt="image.png" loading="lazy"></li></ul></li></ol><h4 id="_4-4-2-注解声明式事务管理" tabindex="-1"><a class="header-anchor" href="#_4-4-2-注解声明式事务管理" aria-hidden="true">#</a> 4.4.2 注解声明式事务管理</h4><ol><li><p>在xml文件中，引入名称空间tx</p><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658022802588-defbbedd-4890-4cbe-88c0-1b044b3c4556.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=158&amp;id=u95bb82e9&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=158&amp;originWidth=1107&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=34490&amp;status=done&amp;style=none&amp;taskId=uf1fd8f47-e47c-4441-bad8-98b14676f20&amp;title=&amp;width=1107" alt="image.png" loading="lazy"></li></ul></li><li><p>在创建事务管理器：</p><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658022561859-1d5f35a3-6c61-43d7-b047-839df40d37de.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=105&amp;id=ueaa6bcd0&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=105&amp;originWidth=828&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=17461&amp;status=done&amp;style=none&amp;taskId=ud3e47b07-5523-4c1d-8f04-5763d1968e3&amp;title=&amp;width=828" alt="image.png" loading="lazy"></li></ul></li><li><p>在xml文件中开启事务注解驱动</p><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658022895725-31bd4f05-dcae-4b39-8626-fd42a565105b.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=152&amp;id=u917acb4f&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=152&amp;originWidth=850&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=29787&amp;status=done&amp;style=none&amp;taskId=u218f1e69-29d7-4c13-ae98-f6d445454df&amp;title=&amp;width=850" alt="image.png" loading="lazy"></li><li></li></ul></li><li><p>在业务逻辑类【Service类】添加<code>@Transactional</code></p><ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658022963213-fad89d2a-b3bb-4bf6-b0c9-dfca00b4b413.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=63&amp;id=u9a24712b&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=63&amp;originWidth=222&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=5573&amp;status=done&amp;style=none&amp;taskId=u0fa9dda6-5dc1-4722-95b9-40707165d37&amp;title=&amp;width=222" alt="image.png" loading="lazy"></li><li><code>@Transactional</code>可以添加在类上面：表示该类中所有方法都添加事务。</li><li><code>@Transactional</code>可以添加到方法上面：表示给该方法添加事务。</li></ul></li></ol><h4 id="_4-4-3-注解声明式事务管理配置参数" tabindex="-1"><a class="header-anchor" href="#_4-4-3-注解声明式事务管理配置参数" aria-hidden="true">#</a> 4.4.3 注解声明式事务管理配置参数<img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658023362591-6a07a61b-c65e-4f57-811d-225455b46a42.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=218&amp;id=u8caecf36&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=218&amp;originWidth=614&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=20116&amp;status=done&amp;style=none&amp;taskId=ud78c1395-e51c-4e4d-aa65-e3fa7d3b8eb&amp;title=&amp;width=614" alt="image.png" loading="lazy"></h4><ol><li><code>propagation</code>：事务传播行为， <ul><li>事务传播行为是为了解决业务层方法之间互相调用的事务问题。</li><li>当事务方法被另一个事务方法调用、或调用其他事务方法时，必须指定事务应该如何传播。——是否开启新事务，新事务如何运行。</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658027637153-33bf0ac7-c148-4911-bd37-f52c11766a25.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=627&amp;id=u22b4499e&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=627&amp;originWidth=1081&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=428149&amp;status=done&amp;style=none&amp;taskId=ub7f5b580-36cc-4acd-824f-74300356202&amp;title=&amp;width=1081" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658028373615-2843c66b-401f-4acb-a8ae-b87aa481e2ac.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=45&amp;id=uc91dde5d&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=45&amp;originWidth=415&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=8702&amp;status=done&amp;style=none&amp;taskId=u24d5d31c-8fa7-4876-b913-5f2d834d239&amp;title=&amp;width=415" alt="image.png" loading="lazy"></li></ul></li><li><code>isolation</code>：事务隔离级别【默认可重复读】 <ul><li>脏读：一个未提交的事务读取到另一个未提交事务的数据</li><li>不可重复读：一个未提交事务读取到另一个提交事务修改的数据。</li><li>幻读：一个未提交事务读取到拎一个提交事务添加的数据。</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658027681856-8839ec98-a0e5-4a03-bf4a-8fbce06f7e4e.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=193&amp;id=u997909b6&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=262&amp;originWidth=543&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=53822&amp;status=done&amp;style=none&amp;taskId=u7aff5626-6520-4989-b43e-0ed5c91d202&amp;title=&amp;width=401" alt="image.png" loading="lazy"></li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658028413998-9069bd0d-146f-4c1c-b6fc-36177792ed05.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=39&amp;id=uc2c82614&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=39&amp;originWidth=709&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=10574&amp;status=done&amp;style=none&amp;taskId=u4b74513c-2a54-4396-b336-70fba33e449&amp;title=&amp;width=709" alt="image.png" loading="lazy"></li></ul></li><li><code>timeout</code>：超时时间，规定事务在一定的时间内进行提交，如果未提交就进行回滚，默认为-1，表示不超时。 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658028483586-e82edcc2-8b2a-4801-80d1-21dfe2e85023.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=60&amp;id=u8e46bd07&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=60&amp;originWidth=707&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=11900&amp;status=done&amp;style=none&amp;taskId=u4240fe56-22a0-4730-9b52-22466fe6b1c&amp;title=&amp;width=707" alt="image.png" loading="lazy"></li></ul></li><li><code>readOnly</code>：是否只读，默认值false，表示可以进行CRUD，设置为true时，只能进行查询。 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658028552854-1e7eab25-49b3-4528-8da6-69ebbf5edfca.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=63&amp;id=uc21d4dbb&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=63&amp;originWidth=716&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=13723&amp;status=done&amp;style=none&amp;taskId=ue0a57d20-5233-44d6-b26b-60f1a01c1e3&amp;title=&amp;width=716" alt="image.png" loading="lazy"></li></ul></li><li><code>rollbackFor</code>：回滚，设置出现哪些异常进行回滚 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658028656991-3ceb1127-617b-44f4-b2cb-b54e7dd850d5.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=66&amp;id=u45487863&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=66&amp;originWidth=711&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=16946&amp;status=done&amp;style=none&amp;taskId=u445f4b18-aaaf-453c-81e1-10e1c823b3a&amp;title=&amp;width=711" alt="image.png" loading="lazy"></li></ul></li><li><code>noRollbackFor</code>：不回滚，设置出现哪些异常不进行回滚 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658028679340-e959e33b-d57d-43b5-9e8f-c14a5ffbdc63.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=82&amp;id=uf2f8e262&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=82&amp;originWidth=712&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=20999&amp;status=done&amp;style=none&amp;taskId=u365b4693-1143-4f50-a168-2d7c7279692&amp;title=&amp;width=712" alt="image.png" loading="lazy"></li></ul></li></ol><h4 id="_4-4-4-xml声明式事务管理" tabindex="-1"><a class="header-anchor" href="#_4-4-4-xml声明式事务管理" aria-hidden="true">#</a> 4.4.4 xml声明式事务管理</h4><ol><li>配置事务管理器 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658030100771-0863f2ef-2601-46f1-aee4-1453dcc1a013.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=350&amp;id=u3054179c&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=350&amp;originWidth=827&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=74197&amp;status=done&amp;style=none&amp;taskId=u0eafe2d7-159d-47e4-87ef-d5bbd4c2c06&amp;title=&amp;width=827" alt="image.png" loading="lazy"></li></ul></li><li>配置通知 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658030134191-ed6130cd-6112-4667-973c-1f9f4f69bf01.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=196&amp;id=u896ebc0a&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=196&amp;originWidth=820&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=33534&amp;status=done&amp;style=none&amp;taskId=u7e5f098e-77b5-4c0d-b1dd-6f4047701cd&amp;title=&amp;width=820" alt="image.png" loading="lazy"></li></ul></li><li>配置切入点和切面 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658030175134-d1e9c30d-9e1e-4d5b-9982-363c621dfebf.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=349&amp;id=u3e770f3b&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=349&amp;originWidth=833&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=64717&amp;status=done&amp;style=none&amp;taskId=u3e46a8b9-7b3c-4050-8d38-7f54adbef2b&amp;title=&amp;width=833" alt="image.png" loading="lazy"></li></ul></li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/tx<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">&quot;</span></span>
       <span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iceriver.spring<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:13306/user_db<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dimitre123<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--    创建jdbc template对象--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--    注入dataSource —— 使用setter注入--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--    1. 创建事务管理器--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        注入数据源--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--    2. 配置通知--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txadvice<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        配置事务参数--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--            指定哪种规则上面添加事务--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accoutMoney<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token comment">&lt;!--            &lt;tx:method name=&quot;accout*&quot;/&gt;&amp;lt;!&amp;ndash;            给前缀是accout的所有方法添加&amp;ndash;&amp;gt;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--    3. 配置切入点和切面--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        配置切入点--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* iceriver.spring.service.UserService.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--            配置切面--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txadvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-完全注解开发" tabindex="-1"><a class="header-anchor" href="#_4-5-完全注解开发" aria-hidden="true">#</a> 4.5 完全注解开发</h3><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658031787274-bdc0f5a4-efba-4a1f-bc3e-48282df0b251.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=1032&amp;id=uca0e85b3&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=1032&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=358636&amp;status=done&amp;style=none&amp;taskId=u0c9c357b-7f72-4028-9645-5a2a8c58d08&amp;title=&amp;width=1920" alt="image.png" loading="lazy"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">iceriver<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ComponentScan</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span></span><span class="token class-name">DataSourceTransactionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableTransactionManagement</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
* <span class="token keyword">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w
* <span class="token keyword">@date</span>: 2022/7/17 12:02
*/</span>
<span class="token annotation punctuation">@Configuration</span><span class="token comment">//1. 声明这是一个配置类</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;iceriver.spring&quot;</span><span class="token punctuation">)</span><span class="token comment">//2. 开启组件扫描</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span><span class="token comment">//3. 声明开启事务</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TxConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">//    4. 创建数据库连接池</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DruidDataSource</span> <span class="token function">getDruidDatasource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">DruidDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:13306/user_db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;dimitre123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//    4. 创建jadbc Template对象</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">JdbcTemplate</span> <span class="token function">getJdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//        jdbcTemplate.setDataSource(getDruidDatasource());//注入dataSource，但这种方式会执行两次getDruidDatasource</span>
        jdbcTemplate<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//    6. 创建事务管理器对象</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DataSourceTransactionManager</span> <span class="token function">getDataSourceTransactionManager</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">DataSourceTransactionManager</span> transactionManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        transactionManager<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> transactionManager<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="第5章-spring5-新功能" tabindex="-1"><a class="header-anchor" href="#第5章-spring5-新功能" aria-hidden="true">#</a> 第5章 Spring5 新功能</h2><h3 id="_5-0-新功能介绍" tabindex="-1"><a class="header-anchor" href="#_5-0-新功能介绍" aria-hidden="true">#</a> 5.0 新功能介绍</h3><ol><li>整个 Spring5 框架的代码基于 Java8，运行时兼容 JDK9， 许多不建议使用的类和方法在代码库中删除。</li><li>Spring5框架自带了通用的日志封装，但也可以整合其他日志框架。 <ul><li>Spring框架不支持Log4j，因为移除了Log4jConfigListener，官方推荐使用Log4j2。</li></ul></li></ol><h3 id="_5-1-整合log4j2日志框架" tabindex="-1"><a class="header-anchor" href="#_5-1-整合log4j2日志框架" aria-hidden="true">#</a> 5.1 整合Log4j2日志框架</h3><ol><li>引入jar包 <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658038769792-bb01f670-51cc-43dd-a193-c040e311d7d8.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=83&amp;id=u37532490&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=83&amp;originWidth=240&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=2923&amp;status=done&amp;style=none&amp;taskId=u40e45739-4eae-44b2-9eab-0762ba750de&amp;title=&amp;width=240" alt="image.png" loading="lazy"></li></ul></li><li>创建<code>log4j2.xml</code>配置文件——该文件名固定</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token comment">&lt;!--日志级别以及优先级排序: OFF &lt; FATAL &lt; ERROR &lt; WARN &lt; INFO &lt; DEBUG &lt; TRACE &lt; ALL --&gt;</span>
<span class="token comment">&lt;!--Configuration后面的status用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，可以看到log4j2内部各种详细输出--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--先定义所有的appender--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appenders</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--输出日志信息到控制台--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>console</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Console<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SYSTEM_OUT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--控制日志输出的格式--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>console</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appenders</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--然后定义logger，只有定义了logger并引入的appender，appender才会生效--&gt;</span>
    <span class="token comment">&lt;!--root：用于指定项目的根日志，如果没有单独指定Logger，则会使用root作为默认的日志输出--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loggers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Console<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loggers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>整合日志框架前： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658039149893-f7a63213-cd3f-4849-9010-09b172d641d7.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u00709af9&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=110&amp;originWidth=762&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=11469&amp;status=done&amp;style=none&amp;taskId=u85e7568c-9b51-4c8d-a03b-d8734dec3ab&amp;title=" alt="image.png" loading="lazy"></li></ul></li><li>整合日志框架后： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658039160611-af6c9260-1e0a-4ddc-8749-8c02556f075c.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u4c3b325d&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=83&amp;originWidth=800&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=9467&amp;status=done&amp;style=none&amp;taskId=u610d4e1e-7af1-4614-ad2d-cb9fd152e5c&amp;title=" alt="image.png" loading="lazy"></li></ul></li></ul><ol start="3"><li>手动输入日志内容至控制台： <ul><li>创建日志类： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658039409935-eacba2d2-9918-4ea3-92ac-ce42ac4c1404.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=100&amp;id=u79efef71&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=100&amp;originWidth=233&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=3444&amp;status=done&amp;style=none&amp;taskId=u39e836a5-5fc2-4510-b789-4c37604dfab&amp;title=&amp;width=233" alt="image.png" loading="lazy"></li></ul></li><li>导入<code>import org.slf4j.Logger;</code>和<code>import org.slf4j.LoggerFactory;</code></li><li>创建log对象：<code>Logger _log _= LoggerFactory._getLogger_(UserLog.class);</code></li><li>调用相关的方法：<code>info(str)</code>、<code>warn(str)</code>等</li></ul></li></ol><h3 id="_5-2-核心容器支持-nullable注解" tabindex="-1"><a class="header-anchor" href="#_5-2-核心容器支持-nullable注解" aria-hidden="true">#</a> 5.2 核心容器支持<code>@Nullable</code>注解</h3><ol><li><code>@Nullable</code> 注解可以使用在方法上面，属性上面，参数上面，表示方法返回可以为空，属性值可以为空，参数值可以为空。</li></ol><h3 id="_5-3-核心容器支持函数式风格-genericapplicationcontext" tabindex="-1"><a class="header-anchor" href="#_5-3-核心容器支持函数式风格-genericapplicationcontext" aria-hidden="true">#</a> 5.3 核心容器支持函数式风格（GenericApplicationContext)</h3><ol><li>程序员手动创建的对象交给Spring管理；</li><li>使用方式： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658041145592-9bd24a10-0c9b-43e0-becf-3cc457732367.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=258&amp;id=ub224703d&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=258&amp;originWidth=591&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=47618&amp;status=done&amp;style=none&amp;taskId=u0471cf84-c9e2-48fd-8e3b-342597d3435&amp;title=&amp;width=591" alt="image.png" loading="lazy"></li></ul></li></ol><h3 id="_5-4-整合junit4" tabindex="-1"><a class="header-anchor" href="#_5-4-整合junit4" aria-hidden="true">#</a> 5.4 整合JUnit4</h3><ol><li>引入<code>spring-test-5.2.6.RELEASE.jar</code>依赖【当然还有junit4，以及hamcrest-core-1.3对junit4进行增强】</li><li>使用注解创建测试类： <ul><li>使用注解后，便可通过注入属性的方式创建测试类的对象</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658041215447-3082b35a-d0ab-441e-8126-a63361a47023.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=218&amp;id=ub84278e4&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=218&amp;originWidth=484&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=29385&amp;status=done&amp;style=none&amp;taskId=u5b36c00b-d21d-475d-bfe8-b263b339af4&amp;title=&amp;width=484" alt="image.png" loading="lazy"></li></ul></li></ol><h3 id="_5-5-整合junit5" tabindex="-1"><a class="header-anchor" href="#_5-5-整合junit5" aria-hidden="true">#</a> 5.5 整合JUnit5</h3><ol><li>引入<code>spring-test-5.2.6.RELEASE.jar</code>依赖【当然还有junit5】</li><li>使用注解创建测试类： <ul><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658041461584-0745d31f-5545-48c4-9d7c-1a1796181d19.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=226&amp;id=uc126b33c&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=226&amp;originWidth=458&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=24721&amp;status=done&amp;style=none&amp;taskId=u78c420a7-4b2a-49af-a9a8-1a68c5058c9&amp;title=&amp;width=458" alt="image.png" loading="lazy"></li><li>复合注解方式：</li><li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658041485279-e8628c96-8fef-4467-ade0-b620c7d83b38.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=195&amp;id=ueb51b898&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=195&amp;originWidth=467&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=21305&amp;status=done&amp;style=none&amp;taskId=u396bb483-14b4-4d90-bf65-18370770681&amp;title=&amp;width=467" alt="image.png" loading="lazy"></li></ul></li></ol><h3 id="_5-6-springwebflux" tabindex="-1"><a class="header-anchor" href="#_5-6-springwebflux" aria-hidden="true">#</a> 5.6 SpringWebflux</h3><blockquote><ul><li>需要SpringMVC、SpringBoot、Maven、Java8新特性知识基础。</li></ul></blockquote><h4 id="_5-6-1-介绍" tabindex="-1"><a class="header-anchor" href="#_5-6-1-介绍" aria-hidden="true">#</a> 5.6.1 介绍</h4><h4 id="_5-6-2-响应式编程" tabindex="-1"><a class="header-anchor" href="#_5-6-2-响应式编程" aria-hidden="true">#</a> 5.6.2 响应式编程</h4><h4 id="_5-6-3-基于注解编程模型" tabindex="-1"><a class="header-anchor" href="#_5-6-3-基于注解编程模型" aria-hidden="true">#</a> 5.6.3 基于注解编程模型</h4><h4 id="_5-6-4-基于函数式编程模型" tabindex="-1"><a class="header-anchor" href="#_5-6-4-基于函数式编程模型" aria-hidden="true">#</a> 5.6.4 基于函数式编程模型</h4></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/sk370/edit/main/demo/src/javaframe/spring5.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><!----><a href="/javaframe/spring-mvc.html" class="nav-link next" aria-label="SpringMVC"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">SpringMVC<span class="icon iconfont icon-creative"></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">默认页脚</div><div class="copyright">Copyright © 2022 朱宇琦</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.b5795010.js" defer></script>
  </body>
</html>
