import{_ as t}from"./plugin-vue_export-helper.21dcd24c.js";import{r as p,o as e,c as o,a as n,b as c,d as s,e as l}from"./app.b5795010.js";var i="/images/javase/java-3/1555575941569.png",u="/images/javase/java-3/image.png",r="/images/javase/java-3/image-1660813495995.png",k="/images/javase/java-3/image-1660813502282.png",d="/images/javase/java-3/image-1660813505362.png",m="/images/javase/java-3/image-1660813508433.png",v="/images/javase/java-3/image-1660813510303.png",b="/images/javase/java-3/image-1660813517697.png",g="/images/javase/java-3/image-1660813520667.png",h="/images/javase/java-3/image-1660813523872.png",y="/images/javase/java-3/image-1660813543071.png",q="/images/javase/java-3/image-1660813545901.png",w="/images/javase/java-3/image-1660813554861.png",f="/images/javase/java-3/image-1660813562406.png",S="/images/javase/java-3/image-1660813564055.png",j="/images/javase/java-3/image-1660813567265.png",D="/images/javase/java-3/image-1660813571004.png";const _={},x=s('<h1 id="java\u8BED\u8A00\u57FA\u7840-\u4E0B" tabindex="-1"><a class="header-anchor" href="#java\u8BED\u8A00\u57FA\u7840-\u4E0B" aria-hidden="true">#</a> Java\u8BED\u8A00\u57FA\u7840\uFF08\u4E0B\uFF09</h1><h2 id="\u7B2C14\u7AE0-jdbc\u548C\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" tabindex="-1"><a class="header-anchor" href="#\u7B2C14\u7AE0-jdbc\u548C\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" aria-hidden="true">#</a> \u7B2C14\u7AE0 JDBC\u548C\u6570\u636E\u5E93\u8FDE\u63A5\u6C60</h2><blockquote><ul><li>\u8981\u6C42\uFF1A\u5B66\u4E60\u4E86Mysql\uFF08sql\u8BED\u53E5\uFF09\u4E4B\u540E</li></ul></blockquote><h3 id="_14-1-jdbc\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_14-1-jdbc\u6982\u8FF0" aria-hidden="true">#</a> 14.1 JDBC\u6982\u8FF0</h3><h4 id="_14-1-1-jdbc\u57FA\u672C\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_14-1-1-jdbc\u57FA\u672C\u4ECB\u7ECD" aria-hidden="true">#</a> 14.1.1 JDBC\u57FA\u672C\u4ECB\u7ECD</h4><ol><li>\u542B\u4E49\uFF1AJava DataBase Connectivity\uFF0CJava\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u7528\u4E8E\u6267\u884CSQL\u8BED\u53E5\u7684JavaAPI\uFF0C\u7531\u7C7B\u548C\u63A5\u53E3\u7EC4\u6210\uFF0C\u63D0\u4F9B\u4E86\u4E2A\u53EF\u4EE5\u6784\u5EFA\u66F4\u9AD8\u7EA7\u5DE5\u5177\u548C\u63A5\u53E3\u53BB\u8BBF\u95EE\u6570\u636E\u5E93\u7684\u57FA\u51C6\u3002</li><li>\u4F5C\u7528\uFF1Ajava\u7A0B\u5E8F\u5458\u4F7F\u7528JDBC\uFF0C\u53EF\u4EE5\u8FDE\u63A5\u4EFB\u4F55\u63D0\u4F9B\u4E86JDBC\u9A71\u52A8\u7A0B\u5E8F\u7684\u6570\u636E\u5E93\u7CFB\u7EDF\uFF0C\u4ECE\u800C\u5B8C\u6210\u5BF9\u6570\u636E\u5E93\u7684\u5404\u79CD\u64CD\u4F5C\u3002JDBC\u4E3A\u8BBF\u95EE\u4E0D\u540C\u7684\u6570\u636E\u5E93\u63D0\u4F9B\u4E86\u7EDF\u4E00\u7684\u63A5\u53E3\uFF0C\u4E3A\u4F7F\u7528\u8005\u5C4F\u853D\u4E86\u7EC6\u8282\u95EE\u9898\u3002</li><li>\u57FA\u672C\u539F\u7406\u56FE\uFF1A <ul><li><img src="'+i+`" alt="1555575941569.png" loading="lazy"></li></ul></li><li>\u6A21\u62DFJDBC\u63A5\u53E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">JdbcInterface</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8FDE\u63A5</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token comment">//crud</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">crud</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5173\u95ED\u8FDE\u63A5</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MysqlJdbcImpl</span> <span class="token keyword">implements</span>  <span class="token class-name">JdbcInterface</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F97\u5230 mysql \u7684\u8FDE\u63A5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">crud</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B8C\u6210 mysql \u589E\u5220\u6539\u67E5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5173\u95ED mysql \u7684\u8FDE\u63A5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-1-2-jdbc-api" tabindex="-1"><a class="header-anchor" href="#_14-1-2-jdbc-api" aria-hidden="true">#</a> 14.1.2 JDBC API</h4><p>![JDBC API.jpeg](/images/javase/java-3/JDBC API.jpeg)</p><ul><li><img src="`+u+'" alt="image.png" loading="lazy"><img src="'+r+'" alt="image.png" loading="lazy"></li><li><img src="'+k+'" alt="image.png" loading="lazy"><img src="'+d+'" alt="image.png" loading="lazy"></li></ul><h4 id="_14-1-3-mysqljdbc" tabindex="-1"><a class="header-anchor" href="#_14-1-3-mysqljdbc" aria-hidden="true">#</a> 14.1.3 MySQLJDBC</h4><ol><li>\u7248\u672C\u652F\u6301\uFF1A <ul><li><img src="'+m+'" alt="image.png" loading="lazy"></li></ul></li><li>\u4E0B\u8F7D\u5730\u5740\uFF1A <ul><li><img src="'+v+'" alt="image.png" loading="lazy"></li><li><img src="'+b+'" alt="image.png" loading="lazy"></li></ul></li></ol><h4 id="_14-1-3-jdbc\u7A0B\u5E8F\u7F16\u5199\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_14-1-3-jdbc\u7A0B\u5E8F\u7F16\u5199\u6B65\u9AA4" aria-hidden="true">#</a> 14.1.3 JDBC\u7A0B\u5E8F\u7F16\u5199\u6B65\u9AA4</h4><blockquote><ul><li>\u524D\u7F6E\u5DE5\u4F5C\uFF1A\u5728\u9879\u76EE\u6587\u4EF6\u76EE\u5F55\u4E2D\u52A0\u8F7D\u5BF9\u5E94\u6570\u636E\u5E93\u7684JDBC\u5DE5\u5177\u5305</li><li><img src="'+g+'" alt="image.png" loading="lazy"><img src="'+h+`" alt="image.png" loading="lazy"></li></ul></blockquote><ol><li>\u6CE8\u518C\u9A71\u52A8\u2014\u2014\u52A0\u8F7DDriver\u7C7B <ul><li>\u6709\u5F02\u5E38\u95EE\u9898</li></ul></li><li>\u83B7\u53D6\u8FDE\u63A5\u2014\u2014\u5F97\u5230Connection</li><li>\u6267\u884CCRUD\u2014\u2014\u53D1\u9001sql\u8BED\u53E5\uFF08\u5B57\u7B26\u4E32\uFF09\u7ED9mysql\u6267\u884C</li><li>\u91CA\u653E\u8D44\u6E90\u2014\u2014\u5173\u95ED\u76F8\u5173\u8FDE\u63A5</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1. \u6CE8\u518C\u9A71\u52A8\u2014\u2014\u52A0\u8F7DDriver\u7C7B</span>
<span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. \u83B7\u53D6\u8FDE\u63A5\u2014\u2014\u5F97\u5230Connection</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:13306/db01&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dimitre123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Connection</span> connect <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. \u6267\u884CCRUD\u2014\u2014\u53D1\u9001sql\u8BED\u53E5\uFF08\u5B57\u7B26\u4E32\uFF09\u7ED9mysql\u6267\u884C</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;crud\u7684SQL\u8BED\u53E5&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//3.1 statement\u5BF9\u8C61\u7528\u4E8E\u5411\u6570\u636E\u5E93\u53D1\u9001sql\u8BED\u53E5</span>
<span class="token class-name">Statement</span> statement <span class="token operator">=</span> connect<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> rows <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. \u91CA\u653E\u8D44\u6E90\u2014\u2014\u5173\u95ED\u76F8\u5173\u8FDE\u63A5</span>
statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connect<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),C={class:"custom-container danger"},P=s(`<p class="custom-container-title">\u8B66\u544A</p><ul><li>\u89E3\u8BFB\uFF1A <ul><li>url\uFF1A <ul><li><code>jdbc:mysql</code>\uFF1A\u4F7F\u7528\u7684\u8FDE\u63A5\u534F\u8BAE</li><li><code>localhost</code>\uFF1A\u8FDE\u63A5\u5730\u5740\uFF08\u6570\u636E\u5E93\u5730\u5740\uFF09</li><li><code>13306</code>\uFF1A\u6570\u636E\u5E93\u7AEF\u53E3\u53F7</li><li><code>db01</code>\uFF1A\u6570\u636E\u5E93\u540D\u79F0</li><li>mysql\u8FDE\u63A5\u7684\u672C\u8D28\u662Fsocket\u8FDE\u63A5</li></ul></li><li>properties\u5BF9\u8C61\uFF1A <ul><li><code>setProperty()</code>\u7684<code>user</code>\u3001<code>password</code>\u662F\u89C4\u5B9A\u597D\u7684</li></ul></li><li><code>excuteUpdate(sql)</code>\uFF1Adml\u8BED\u53E5\u65F6\uFF0C\u8FD4\u56DE\u7684\u662F\u5F71\u54CD\u7684\u884C\u6570\u3002 :::</li></ul></li></ul><h3 id="_14-2-\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5-connection-\u76845\u79CD\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_14-2-\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5-connection-\u76845\u79CD\u65B9\u5F0F" aria-hidden="true">#</a> 14.2 \u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\uFF08connection\uFF09\u76845\u79CD\u65B9\u5F0F</h3><h4 id="_14-2-1-\u4F7F\u7528driver\u7C7B\u7684connect-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_14-2-1-\u4F7F\u7528driver\u7C7B\u7684connect-\u65B9\u6CD5" aria-hidden="true">#</a> 14.2.1 \u4F7F\u7528Driver\u7C7B\u7684<code>connect()</code>\u65B9\u6CD5</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1. \u6CE8\u518C\u9A71\u52A8\u2014\u2014\u52A0\u8F7DDriver\u7C7B</span>
<span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. \u83B7\u53D6\u8FDE\u63A5\u2014\u2014\u5F97\u5230Connection</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:13306/db01&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dimitre123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Connection</span> connect <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5B58\u5728\u95EE\u9898\uFF1ADriver()\u662F\u7B2C\u4E09\u65B9\u5DE5\u5177\uFF0C\u4F9D\u8D56\u5F3A\u3001\u7075\u6D3B\u6027\u5DEE\uFF0C\u4E14\u5C5E\u4E8E\u9759\u6001\u52A0\u8F7D\u3002</li></ul><h4 id="_14-2-2-\u4F7F\u7528\u53CD\u5C04\u83B7\u53D6driver-\u518D\u4F7F\u7528connect-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_14-2-2-\u4F7F\u7528\u53CD\u5C04\u83B7\u53D6driver-\u518D\u4F7F\u7528connect-\u65B9\u6CD5" aria-hidden="true">#</a> 14.2.2 \u4F7F\u7528\u53CD\u5C04\u83B7\u53D6Driver\uFF0C\u518D\u4F7F\u7528<code>connect()</code>\u65B9\u6CD5</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1. \u6CE8\u518C\u9A71\u52A8\u2014\u2014\u52A0\u8F7DDriver\u7C7B</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Driver</span><span class="token punctuation">)</span>aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. \u83B7\u53D6\u8FDE\u63A5\u2014\u2014\u5F97\u5230Connection</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:13306/db01&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dimitre123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Connection</span> connect <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u597D\u5904\uFF1A\u52A8\u6001\u52A0\u8F7D\uFF0C\u51CF\u5C11\u4F9D\u8D56\u6027\uFF0C\u66F4\u52A0\u7075\u6D3B\u3002</li></ul><h4 id="_14-2-3-\u4F7F\u7528drivermanager\u6CE8\u518C\u9A71\u52A8" tabindex="-1"><a class="header-anchor" href="#_14-2-3-\u4F7F\u7528drivermanager\u6CE8\u518C\u9A71\u52A8" aria-hidden="true">#</a> 14.2.3 \u4F7F\u7528DriverManager\u6CE8\u518C\u9A71\u52A8</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1. \u6CE8\u518C\u9A71\u52A8\u2014\u2014\u52A0\u8F7DDriver\u7C7B</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Driver</span><span class="token punctuation">)</span>aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. \u83B7\u53D6\u8FDE\u63A5\u2014\u2014\u5F97\u5230Connection</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:13306/db01&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dimitre123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6CE8\u518CDriver\u9A71\u52A8</span>

<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-2-4-class-forname-\u81EA\u52A8\u5B8C\u6210\u6CE8\u518C\u9A71\u52A8-\u7B80\u5316\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_14-2-4-class-forname-\u81EA\u52A8\u5B8C\u6210\u6CE8\u518C\u9A71\u52A8-\u7B80\u5316\u4EE3\u7801" aria-hidden="true">#</a> 14.2.4 Class.forName \u81EA\u52A8\u5B8C\u6210\u6CE8\u518C\u9A71\u52A8\uFF0C\u7B80\u5316\u4EE3\u7801</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1. \u6CE8\u518C\u9A71\u52A8\u2014\u2014\u52A0\u8F7DDriver\u7C7B</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. \u83B7\u53D6\u8FDE\u63A5\u2014\u2014\u5F97\u5230Connection</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:13306/db01&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dimitre123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>mysql\u5B9E\u73B0java.sql\u7684Driver\u63A5\u53E3\u65F6\uFF0C\u521B\u5EFA\u4E86\u9759\u6001\u4EE3\u7801\u5757\uFF0C\u81EA\u52A8\u6267\u884C<code>DriverManager.registerDriver(new Driver());</code></li><li>\u4E0D\u5199<code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code>\u4E5F\u4F1A\u6B63\u5E38\u8FD0\u884C\uFF0C\u662F\u56E0\u4E3Ajdk1.5\u4E4B\u540E\u4F7F\u7528\u4E86jdbc4\uFF0C\u4F1A\u81EA\u52A8\u8C03\u7528<code>\u2026\u2026\\libs\\mysql-connector-java-5.1.37-bin.jar!\\META-INF\\services\\java.sql.Driver</code>\u6587\u4EF6\u4E2D\u7684\u7C7B\u540D\uFF08<code>com.mysql.jdbc.Driver</code>\uFF09\u53BB\u6CE8\u518C</li></ul><h4 id="_14-2-5-\u4F7F\u7528\u914D\u7F6E\u6587\u4EF6\u8BFB\u53D6\u8FDE\u63A5\u5730\u5740\u7B49\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_14-2-5-\u4F7F\u7528\u914D\u7F6E\u6587\u4EF6\u8BFB\u53D6\u8FDE\u63A5\u5730\u5740\u7B49\u4FE1\u606F" aria-hidden="true">#</a> 14.2.5 \u4F7F\u7528\u914D\u7F6E\u6587\u4EF6\u8BFB\u53D6\u8FDE\u63A5\u5730\u5740\u7B49\u4FE1\u606F</h4><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">user</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">dimitre123</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:13306/hsp_db02</span>
<span class="token key attr-name">driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;src\\\\mysql.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1. \u6CE8\u518C\u9A71\u52A8\u2014\u2014\u52A0\u8F7DDriver\u7C7B</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. \u83B7\u53D6\u8FDE\u63A5\u2014\u2014\u5F97\u5230Connection</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-3-\u7ED3\u679C\u96C6-resultset" tabindex="-1"><a class="header-anchor" href="#_14-3-\u7ED3\u679C\u96C6-resultset" aria-hidden="true">#</a> 14.3 \u7ED3\u679C\u96C6\uFF08ResultSet\uFF09</h3><ol><li>\u542B\u4E49\uFF1A\u6267\u884C\u67E5DQL\u8BED\u53E5\u8FD4\u56DE\u7684\u67E5\u8BE2\u7ED3\u679C\u3002</li><li>ResultSet\u5BF9\u8C61\u4FDD\u6301\u4E00\u4E2A\u5149\u6807\u6307\u5411\u5176\u5F53\u524D\u7684\u6570\u636E\u884C\uFF0C\u6700\u521D\u5149\u6807\u4F4D\u4E8E\u7B2C\u4E00\u884C\u4E4B\u524D\uFF0Cnext\u65B9\u6CD5\u5C06\u5149\u6807\u79FB\u52A8\u5230\u4E0B\u4E00\u884C\uFF0C\u5E76\u4E14\u7531\u4E8E\u518DResultSet\u5BF9\u8C61\u4E2D\u6CA1\u6709\u66F4\u591A\u884C\u65F6\u8FD4\u56DEfalse\u3002\u53EF\u4EE5\u4F7F\u7528while\u5FAA\u73AF\u904D\u5386\u3002</li><li>\u4F7F\u7528\uFF1A<code>ReultSet resultSet = statement.excuteQuery(sql);</code><ul><li>\u5173\u95ED\u7ED3\u679C\u96C6\uFF1A<code>resultSet.close();</code></li></ul></li><li>\u65B9\u6CD5\uFF1A</li><li>\u5E95\u5C42\uFF1AResultSet\u662F\u4E2A\u63A5\u53E3\uFF0C\u5E95\u5C42\u7684\u6570\u636E\u662F\u8868\u662F\u4E00\u4E2AArrayList <ul><li><img src="`+y+'" alt="image.png" loading="lazy"></li></ul></li></ol><h3 id="_14-4-sql\u6CE8\u5165" tabindex="-1"><a class="header-anchor" href="#_14-4-sql\u6CE8\u5165" aria-hidden="true">#</a> 14.4 SQL\u6CE8\u5165</h3><ol><li>\u542B\u4E49\uFF1A\u5229\u7528\u67D0\u4E9B\u7CFB\u7EDF\u6CA1\u6709\u5BF9\u7528\u6237\u8F93\u5165\u7684\u6570\u636E\u8FDB\u884C\u5145\u5206\u7684\u68C0\u67E5\uFF0C\u800C\u5728\u7528\u6237\u8F93\u5165\u6570\u636E\u4E2D\u6CE8\u5165\u975E\u6CD5\u7684SQL\u8BED\u53E5\u6BB5\u6216\u547D\u4EE4\uFF0C\u6076\u610F\u653B\u51FB\u6570\u636E\u5E93\u3002</li><li>\u8BBF\u95EE\u6570\u636E\u5E93\u3001\u6267\u884Csql\u8BED\u53E5\u7684\u4E09\u79CD\u65B9\u6CD5\uFF1A <ul><li><code>Statement</code>\u5BF9\u8C61\u3010\u5B58\u5728sql\u6CE8\u5165\u95EE\u9898\u3011</li><li><code>PreparedStatement</code>\u5BF9\u8C61\u3010\u9884\u5904\u7406\u3011</li><li><code>CallableStatement</code>\u5BF9\u8C61\u3010\u5B58\u50A8\u8FC7\u7A0B\u3011</li></ul></li><li>\u4E07\u80FD\u7528\u6237\u540D\uFF1A<code>1&#39; or</code>\uFF0C\u4E07\u80FD\u5BC6\u7801\uFF1A<code>or &#39;1&#39;=&#39;1&#39;</code></li></ol><h3 id="_14-5-preparedstatement\u9884\u5904\u7406\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_14-5-preparedstatement\u9884\u5904\u7406\u7684\u4F7F\u7528" aria-hidden="true">#</a> 14.5 PreparedStatement\u9884\u5904\u7406\u7684\u4F7F\u7528</h3><ol><li>PreparedStatement\u662FStatement\u7684\u5B50\u63A5\u53E3\uFF0C\u53EF\u4EE5\u4F7F\u7528Statement\u7684\u65B9\u6CD5\uFF08\u600E\u4E48\u4F7F\u7528\u7684\uFF0CStatement\u7684\u65B9\u6CD5\u90FD\u662F\u62BD\u8C61\u7684\uFF0C\u662F\u56E0\u4E3A\u52A0\u8F7D\u4E86JDBCjar\u5305\u7684\u539F\u56E0\u5417\uFF1F\uFF09 <ul><li><img src="'+q+`" alt="image.png" loading="lazy"></li></ul></li><li>\u8BED\u6CD5\u53D8\u5316\uFF1A <ul><li>\u4E66\u5199sql\u8BED\u53E5\uFF08\u5B9A\u4E49sql\u5B57\u7B26\u4E32\uFF09\uFF1A\u4F7F\u7528<code>?</code>\u4EE3\u66FF\u53C2\u6570\u503C\uFF0C\u4F5C\u4E3A\u5360\u4F4D\u7B26\u3002 <ul><li><code>String sql = &quot;select name , pwd from admin where name =? and pwd = ?&quot;;</code></li></ul></li><li>\u521B\u5EFAPreparedStatement\u5BF9\u8C61\uFF1A<code>PreparedStatement preparedStatement = connection.prepareStatement(sql);</code><ul><li>Statement\u6B64\u65F6\u4E0D\u9700\u8981\u4F20\u5165sql\u8BED\u53E5</li></ul></li><li>\u4F7F\u7528PreparedStatement\u7684\u5BF9\u8C61\u7ED9sql\u8BED\u53E5\u7684\u5360\u4F4D\u7B26\u8D4B\u503C\uFF1A\u4F7F\u7528<code>setXxx(int n, String str)</code><ul><li>n\u8868\u793A<code>?</code>\u5728sql\u8BED\u53E5\u4E2D\u4ECE\u5DE6\u81F3\u53F3\u51FA\u73B0\u7684\u6B21\u5E8F\uFF0C\u4ECE1\u5F00\u59CB\u3002</li><li>str\u8868\u793A\u53C2\u6570\u503C\u3002</li></ul></li><li>\u8C03\u7528<code>excuteUpade()</code>\u6216<code>excuteQuery()</code>\u65B9\u6CD5\uFF0C\u8FD4\u56DE\u7ED3\u679C\u96C6\u3002\u4E0D\u9700\u8981\u518D\u4F20\u5165sql\u8BED\u53E5\u5F53\u4F5C\u53C2\u6570\u3002</li></ul></li><li>\u9884\u5904\u7406\u597D\u5904\uFF1A <ul><li>\u4E0D\u518D\u4F7F\u7528<code>+</code>\u62FC\u63A5sql\u8BED\u53E5\uFF0C\u51CF\u5C11\u4E86\u8BED\u6CD5\u9519\u8BEF\u3002</li><li>\u6709\u6548\u907F\u514D\u4E86sql\u6CE8\u5165\u95EE\u9898</li><li>\u51CF\u5C11\u4E86\u7F16\u8BD1\u6B21\u6570\uFF0C\u63D0\u9AD8\u4E86\u6548\u7387</li></ul></li></ol><h3 id="_14-6-jdbc\u4E8B\u52A1" tabindex="-1"><a class="header-anchor" href="#_14-6-jdbc\u4E8B\u52A1" aria-hidden="true">#</a> 14.6 JDBC\u4E8B\u52A1</h3><h4 id="_14-6-1-jdbc\u4E8B\u52A1\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_14-6-1-jdbc\u4E8B\u52A1\u4ECB\u7ECD" aria-hidden="true">#</a> 14.6.1 JDBC\u4E8B\u52A1\u4ECB\u7ECD</h4><ol><li>JDBC\u521B\u5EFA\u4E00\u4E2AConnection\u5BF9\u8C61\u540E\uFF0C\u9ED8\u8BA4\u662F\u81EA\u52A8\u63D0\u4EA4\u4E8B\u52A1\uFF0C\u6267\u884C\u6210\u529F\u540E\u4E0D\u80FD\u56DE\u6EDA\u3002</li><li>\u8C03\u7528Connetcion\u5BF9\u8C61\u7684<code>setAutoCommit(false)</code>\u53EF\u4EE5\u53D6\u6D88\u81EA\u52A8\u63D0\u4EA4\u4E8B\u52A1\u3002</li><li>\u8C03\u7528Connetcion\u5BF9\u8C61\u7684<code>commit()</code>\u53EF\u4EE5\u63D0\u4EA4\u4E8B\u52A1\u3002</li><li>\u8C03\u7528Connetcion\u5BF9\u8C61\u7684<code>rollback()</code>\u53EF\u4EE5\u56DE\u6EDA\u4E8B\u52A1\u3002</li></ol><h4 id="_14-6-2-\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_14-6-2-\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> 14.6.2 \u5E94\u7528\u573A\u666F</h4><ol><li>\u94F6\u884C\u8F6C\u8D26\u3002</li></ol><h3 id="_14-7-\u6279\u5904\u7406-batch" tabindex="-1"><a class="header-anchor" href="#_14-7-\u6279\u5904\u7406-batch" aria-hidden="true">#</a> 14.7 \u6279\u5904\u7406\uFF08batch\uFF09</h3><h4 id="_14-7-1-\u6279\u5904\u7406\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_14-7-1-\u6279\u5904\u7406\u4ECB\u7ECD" aria-hidden="true">#</a> 14.7.1 \u6279\u5904\u7406\u4ECB\u7ECD</h4><ol><li>java\u7684\u6279\u91CF\u66F4\u65B0\u673A\u5236\u5141\u8BB8\u591A\u6761\u8BED\u53E5\u4E00\u6B21\u6027\u63D0\u4EA4\u7ED9\u6570\u636E\u5E93\u5904\u7406\uFF0C\u63D0\u9AD8\u5904\u7406\u6548\u7387\u3002\u76F8\u5F53\u4E8E\u516C\u4EA4\u8F66\u62C9\u4E00\u8F66\u4EBA\u3002</li><li>\u6279\u5904\u7406\u65B9\u6CD5\uFF08statement\u5BF9\u8C61\u8C03\u7528\uFF09\uFF1A <ul><li><code>addBatch()</code>\uFF1A\u6DFB\u52A0\u9700\u8981\u6279\u5904\u7406\u7684SQL\u8BED\u53E5\u6216\u53C2\u6570</li><li><code>excuteBatch()</code>\uFF1A\u6267\u884C\u6279\u5904\u7406\u8BED\u53E5</li><li><code>clearBatch()</code>\uFF1A\u6E05\u7A7A\u6279\u5904\u7406\u5305\u7684\u8BED\u53E5</li></ul></li><li>\u4F7F\u7528\uFF1A <ul><li>url\u6DFB\u52A0\u53C2\u6570<code>?rewriteBatchedStatements=true</code></li></ul></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into admin2 values(null, ?, ?)&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//5000\u6267\u884C</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;666&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">clearBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
preparedStatement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u907F\u514D\u6CA1\u52301000\u6761\u7684\u6570\u636E\u5B58\u5728\u9057\u6F0F</span>
<span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u6E90\u7801\u5206\u6790\uFF1A <ul><li>\u6267\u884C<code>addBatch()</code>\u4F1A\u521B\u5EFA ArrayList - elementData =&gt; Object[]</li><li>elementData =&gt; Object[] \u5C31\u4F1A\u5B58\u653E\u6211\u4EEC\u9884\u5904\u7406\u7684sql\u8BED\u53E5</li><li>\u5F53elementData\u6EE1\u540E,\u5C31\u6309\u71671.5\u6269\u5BB9</li><li>\u5F53\u6DFB\u52A0\u5230\u6307\u5B9A\u7684\u503C\u540E\uFF0C\u5C31executeBatch\u6279\u91CF\u5904\u7406\u4F1A\u51CF\u5C11\u6211\u4EEC\u53D1\u9001sql\u8BED\u53E5\u7684\u7F51\u7EDC\u5F00\u9500\uFF0C\u800C\u4E14\u51CF\u5C11\u7F16\u8BD1\u6B21\u6570\uFF0C\u56E0\u6B64\u6548\u7387\u63D0\u9AD8</li></ul></li></ol><h3 id="_14-8-\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" tabindex="-1"><a class="header-anchor" href="#_14-8-\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" aria-hidden="true">#</a> 14.8 \u6570\u636E\u5E93\u8FDE\u63A5\u6C60</h3><h4 id="_14-8-1-\u4F20\u7EDF\u65B9\u5F0F\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_14-8-1-\u4F20\u7EDF\u65B9\u5F0F\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u95EE\u9898" aria-hidden="true">#</a> 14.8.1 \u4F20\u7EDF\u65B9\u5F0F\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u95EE\u9898</h4><ol><li>\u4F20\u7EDFJDBC\u8FDE\u63A5\u6570\u636E\u5E93\u4F7F\u7528DriverManager\u6765\u83B7\u53D6\uFF0C\u6BCF\u6B21\u5411\u6570\u636E\u5E93\u7B80\u5386\u8FDE\u63A5\u65F6\uFF0C\u9700\u8981\u5C06Connection\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D\uFF0C\u518D\u9A8C\u8BC1ip\u5730\u5740\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\uFF080.05~1s\u65F6\u95F4\uFF09\uFF0C\u9891\u7E41\u8FDB\u884C\u6570\u636E\u5E93\u8FDE\u63A5\u64CD\u4F5C\u4F1A\u5360\u7528\u7CFB\u7EDF\u8D44\u6E90\uFF0C\u5BFC\u81F4\u670D\u52A1\u5668\u5D29\u6E83\u3002</li><li>\u6BCF\u6B21\u8FDE\u63A5\u6570\u636E\u5E93\u64CD\u4F5C\u540E\uFF0C\u4F7F\u7528\u7ED3\u675F\u90FD\u5E94\u65AD\u5F00\uFF0C\u5982\u679C\u7A0B\u5E8F\u51FA\u73B0\u5F02\u5E38\u800C\u672A\u5173\u95ED\uFF0C\u5C06\u5BFC\u81F4\u6570\u636E\u5E93\u5185\u5B58\u6CC4\u6F0F\uFF0C\u5BFC\u81F4\u6570\u636E\u5E93\u91CD\u542F</li><li>\u4F20\u7EDF\u8FDE\u63A5\u65B9\u5F0F\uFF0C\u4E0D\u80FD\u63A7\u5236\u521B\u5EFA\u7684\u8FDE\u63A5\u6570\u91CF\uFF0C\u5982\u679C\u8FDE\u63A5\u8FC7\u591A\uFF0C\u4E5F\u53EF\u80FD\u5BFC\u81F4\u5185\u5B58\u6CC4\u6F0F\uFF0Cmysql\u5D29\u6E83</li><li>\u4F7F\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF08connection pool\uFF09\u6280\u672F\uFF0C\u53EF\u4EE5\u89E3\u51B3\u4E0A\u8FF0\u95EE\u9898\u3002</li></ol><h4 id="_14-8-2-\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_14-8-2-\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4ECB\u7ECD" aria-hidden="true">#</a> 14.8.2 \u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4ECB\u7ECD</h4><ol><li>\u9884\u5148\u518D\u7F13\u51B2\u6C60\u4E2D\u653E\u5165\u4E00\u5B9A\u6570\u91CF\u7684\u8FDE\u63A5\uFF0C\u5F53\u9700\u8981\u5EFA\u7ACB\u6570\u636E\u5E93\u8FDE\u63A5\u65F6\uFF0C\u53EA\u9700\u4ECE\u201C\u7F13\u51B2\u6C60\u201D\u53D6\u51FA\u8FDE\u63A5\uFF0C\u4F7F\u7528\u5B8C\u6BD5\u540E\u653E\u56DE\u5230\u201C\u7F13\u51B2\u6C60\u201D</li><li>\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u8D1F\u8D23\u5206\u914D\u3001\u7BA1\u7406\u3001\u91CA\u653E\u6570\u636E\u5E93\u7684\u8FDE\u63A5\uFF0C\u5B83\u5141\u8BB8\u7528\u7528\u7A0B\u5E8F\u91CD\u590D\u4F7F\u7528\u4E00\u4E2A\u73B0\u6709\u7684\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u800C\u4E0D\u7528\u91CD\u65B0\u5EFA\u7ACB\u3002</li><li>\u5F53\u5E94\u7528\u7A0B\u5E8F\u5411\u8FDE\u63A5\u6C60\u8BF7\u6C42\u7684\u8FDE\u63A5\u6570\u91CF\u8D85\u8FC7\u6700\u5927\u8FDE\u63A5\u6570\u91CF\u65F6\uFF0C\u8FD9\u4E9B\u8BF7\u6C42\u4F1A\u88AB\u52A0\u5165\u5230\u7B49\u5F85\u961F\u5217\u4E2D\u3002</li><li>JDBC\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4F7F\u7528<code>javax.sql.DataSource</code>\u8868\u793A\uFF0CDataSource\u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u7531\u7B2C\u4E09\u65B9\u63D0\u4F9B\u5B9E\u73B0\u3010\u63D0\u4F9B.jar\u3011</li><li>\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u79CD\u7C7B\uFF1A <ul><li>C3P0\uFF1A\u901F\u5EA6\u8F83\u6162\uFF0C\u7A33\u5B9A\u6027\u597D</li><li>DBCP\uFF1A\u901F\u5EA6\u8F83\u5FEB\uFF0C\u4F46\u4E0D\u7A33\u5B9A</li><li>Proxool\uFF1A\u6709\u76D1\u63A7\u8FDE\u63A5\u6C60\u72B6\u6001\u7684\u529F\u80FD\uFF0C\u7A33\u5B9A\u6027\u4E0D\u5982C3P0</li><li>BoneCP\uFF1A\u901F\u5EA6\u5FEB</li><li>Druid\uFF08\u5FB7\u9C81\u4F0A\uFF09\uFF1A\u963F\u91CC\u63D0\u4F9B\uFF0C\u5177\u6709DBCP\u3001C3P0\u3001Proxool\u4F18\u70B9</li></ul></li></ol><h4 id="_14-8-3-c3p0\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_14-8-3-c3p0\u4F7F\u7528" aria-hidden="true">#</a> 14.8.3 C3P0\u4F7F\u7528</h4><ol><li>\u5C06c3p0\u7684jar\u5305\u6DFB\u52A0\u5230\u5F00\u53D1\u73AF\u5883\uFF0C\u540Cjdbc\u3002</li><li>\u8FDE\u63A5\u65B9\u5F0F\u4E00\uFF1A</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1. \u521B\u5EFA\u4E00\u4E2A\u6570\u636E\u6E90\u5BF9\u8C61</span>
<span class="token class-name">ComboPooledDataSource</span> comboPooledDataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. \u901A\u8FC7\u914D\u7F6E\u6587\u4EF6mysql.properties \u83B7\u53D6\u76F8\u5173\u8FDE\u63A5\u7684\u4FE1\u606F</span>
<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;src\\\\mysql.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//\u7ED9\u6570\u636E\u6E90 comboPooledDataSource \u8BBE\u7F6E\u76F8\u5173\u7684\u53C2\u6570</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setDriverClass</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//\u8BBE\u7F6E\u521D\u59CB\u5316\u8FDE\u63A5\u6570</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setInitialPoolSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u6700\u5927\u8FDE\u63A5\u6570</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setMaxPoolSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u6D4B\u8BD5\u8FDE\u63A5\u6C60\u7684\u6548\u7387, \u6D4B\u8BD5\u5BF9mysql 5000\u6B21\u64CD\u4F5C</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> comboPooledDataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u8FDE\u63A5\u65B9\u5F0F\u4E8C\uFF1A\u4F7F\u7528c3p0\u7684\u914D\u7F6E\u6587\u4EF6\uFF08\u6574\u5408\u4E86\u767B\u5F55\u540D\u3001\u7528\u6237\u5BC6\u7801\u3001\u8FDE\u63A5\u5730\u5740\u3001\u8BBE\u7F6E\u4E86\u8FDE\u63A5\u6570\u91CF\u7B49\uFF09\uFF0C\u653E\u5230src\u8DEF\u5F84\u4E0B</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>named-config</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- \u6570\u636E\u6E90\u540D\u79F0\uFF0C\u53EF\u4EE5\u4EFB\u610F --&gt;</span>
    <span class="token comment">&lt;!-- \u9A71\u52A8\u7C7B\uFF0C\u8DDF\u6570\u636E\u5E93\u76F8\u5173 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- url--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://127.0.0.1:3306/girls<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u7528\u6237\u540D --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u5BC6\u7801 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u6BCF\u6B21\u589E\u957F\u7684\u8FDE\u63A5\u6570--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>acquireIncrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u521D\u59CB\u7684\u8FDE\u63A5\u6570 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u6700\u5C0F\u8FDE\u63A5\u6570 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u6700\u5927\u8FDE\u63A5\u6570 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u53EF\u8FDE\u63A5\u7684\u6700\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u6570 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatements<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span> 
    <span class="token comment">&lt;!-- \u6BCF\u4E2A\u8FDE\u63A5\u5BF9\u8C61\u53EF\u8FDE\u63A5\u7684\u6700\u591A\u7684\u547D\u4EE4\u5BF9\u8C61\u6570 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatementsPerConnection<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>named-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">ComboPooledDataSource</span> comboPooledDataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u6D4B\u8BD55000\u6B21\u8FDE\u63A5mysql</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">500000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> comboPooledDataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-8-4-druid\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_14-8-4-druid\u4F7F\u7528" aria-hidden="true">#</a> 14.8.4 Druid\u4F7F\u7528</h4><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1656325855512-4881c7ae-2b44-4ffd-a2e1-6ee955c962b1.png#clientId=uaf046232-8b05-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=54&amp;id=u3c51dba8&amp;margin=[object Object]&amp;name=image.png&amp;originHeight=54&amp;originWidth=635&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=8940&amp;status=done&amp;style=none&amp;taskId=u1a983deb-461c-4d31-bbd6-0c7b64ba3e7&amp;title=&amp;width=635" alt="image.png" loading="lazy"></p><ol><li>\u5C06Druid\u7684jar\u5305\u6DFB\u52A0\u5230\u5F00\u53D1\u73AF\u5883\uFF0C\u540Cjdbc\u3002</li></ol><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#key=value</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/girls?rewriteBatchedStatements=true</span>
<span class="token comment">#url=jdbc:mysql://localhost:3306/girls</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token comment">#initial connection Size</span>
<span class="token key attr-name">initialSize</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token comment">#min idle connecton size</span>
<span class="token key attr-name">minIdle</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
<span class="token comment">#max active connection size</span>
<span class="token key attr-name">maxActive</span><span class="token punctuation">=</span><span class="token value attr-value">20</span>
<span class="token comment">#max wait time (5000 mil seconds)</span>
<span class="token key attr-name">maxWait</span><span class="token punctuation">=</span><span class="token value attr-value">5000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;src\\\\druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">500000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-9-apache\u4E4Bdbutils" tabindex="-1"><a class="header-anchor" href="#_14-9-apache\u4E4Bdbutils" aria-hidden="true">#</a> 14.9 Apache\u4E4BDBUtils</h3><h4 id="_14-9-1-\u57FA\u672C\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_14-9-1-\u57FA\u672C\u4ECB\u7ECD" aria-hidden="true">#</a> 14.9.1 \u57FA\u672C\u4ECB\u7ECD</h4><ol><li>commons-dbutils\u662FApache\u7EC4\u7EC7\u63D0\u4F9B\u7684\u4E00\u4E2A\u5F00\u6E90JDBC\u5DE5\u5177\u7C7B\u5E93\uFF0C\u5B83\u662F\u5BF9JDBC\u7684\u5C01\u88C5\u3002\u7B80\u5316Dao\u5C42\u7684\u64CD\u4F5C\u3002</li><li>\u6811\u7ED3\u6784\uFF1A<img src="`+w+'" alt="image.png" loading="lazy"></li><li>\u4F5C\u7528\uFF1A\u5C06\u6570\u636E\u5E93\u67E5\u8BE2\u5F97\u5230\u7684\u6570\u636E\u653E\u5230\u4E00\u4E2AArrayList\u4E2D\uFF0C\u5373\u4F7F\u8FDE\u63A5\u5173\u95ED\u4E86\uFF0C\u4E5F\u80FD\u4F7F\u7528\u8FD9\u4E9B\u6570\u636E\u3002\uFF08\u6B63\u5E38\u60C5\u51B5\u4E0B\u8FDE\u63A5\u5173\u95ED\uFF0C\u5C31\u8BBF\u95EE\u4E0D\u5230\u8FD9\u4E9B\u6570\u636E\uFF09\u3002</li><li>\u4F7F\u7528\u6B65\u9AA4\uFF1A <ul><li>\u5F97\u5230\u8FDE\u63A5\uFF08\u4F7F\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u7B49\u65B9\u5F0F\uFF09</li><li>\u5C06common-dbutils\u52A0\u5165\u5E93\u6587\u4EF6</li><li>\u521B\u5EFAQueryRunner\u7684\u5BF9\u8C61<code>QueryRunner queryRunner = new QueryRunner()</code></li><li>\u6267\u884CDQL\uFF0C\u8FD4\u56DEArrayList\u7ED3\u679C\u96C6 <ul><li>\u8FD4\u56DE\u591A\u4E2A\u5BF9\u8C61\uFF08\u67E5\u8BE2\u591A\u884C\uFF09\uFF1AqueryRunner.query(connection, sql, new BeanListHandler&lt;&gt;(\u7C7B\u540D.class)</li><li>\u8FD4\u56DE\u5355\u4E2A\u5BF9\u8C61\uFF08\u67E5\u8BE2\u5355\u884C\uFF09\uFF1AqueryRunner.query(connection, sql, new BeanHandler&lt;&gt;(\u7C7B\u540D.class)</li><li>\u8FD4\u56DE\u5355\u884C\u5355\u5217\u5BF9\u8C61\uFF08\u5BF9\u8C61\u7C7B\u578B\u4E3AObject\uFF09\uFF1AqueryRunner.query(connection, sql, new ScalarHandler&lt;&gt;()</li></ul></li><li>\u6267\u884CDML\uFF0C\u8FD4\u56DE\u53D7\u5F71\u54CD\u7684\u884C\u6570\u3002 <ul><li>queryRunner.update(connection, sql, ?\u7684\u503C)</li></ul></li></ul></li><li>\u5E95\u5C42\u5206\u6790\uFF1A <ul><li>\u8C03\u7528query()\u65B9\u6CD5\u65F6\uFF0C\u5E95\u5C42\u4F1A\u521B\u5EFAPreparedStatement\u3001ResultSet\u3001 \u4E00\u4E2A\u63A5\u6536\u7ED3\u679C\u7684Object\u5BF9\u8C61</li><li>\u5E95\u5C42\u8C03\u7528handle(\u67E5\u8BE2\u7ED3\u679C)\uFF0C\u5229\u7528\u53CD\u5C04\u673A\u5236\u5C06\u67E5\u8BE2\u5230\u7684\u7ED3\u679C\u4F20\u5165\u5230Object\u5BF9\u8C61\u91CC</li><li>\u6267\u884C\u5B8C\u6BD5\u5173\u95ED\u7ED3\u679C\u96C6\u3001statement</li></ul></li><li>ResultSetSHandler\u63A5\u53E3\u5B9E\u73B0\u7C7B\u7684\u4E3B\u8981\u4F5C\u7528\uFF1AResultSetSHandler\u7528\u4E8E\u5904\u7406java.sql.ResultSet\uFF0C\u5C06\u6570\u636E\u6309\u8981\u6C42\u8F6C\u6362\u4E3A\u53E6\u4E00\u79CD\u5F62\u5F0F\u3002 <ul><li><img src="'+f+'" alt="image.png" loading="lazy"></li><li><img src="'+S+`" alt="image.png" loading="lazy"></li></ul></li></ol><h4 id="_14-9-2-\u6A21\u4EFFdbutils-\u7406\u89E3\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_14-9-2-\u6A21\u4EFFdbutils-\u7406\u89E3\u539F\u7406" aria-hidden="true">#</a> 14.9.2 \u6A21\u4EFFdbutils\uFF0C\u7406\u89E3\u539F\u7406</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Actor</span><span class="token punctuation">&gt;</span></span> <span class="token function">testSelectToArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. \u5F97\u5230\u8FDE\u63A5</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">//2. \u7EC4\u7EC7\u4E00\u4E2Asql</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from actor where id &gt;= ?&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">ResultSet</span> set <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Actor</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u521B\u5EFAArrayList \u5BF9\u8C61,\u5B58\u653Eactor \u5BF9\u8C61</span>
    <span class="token comment">//3. \u521B\u5EFAPreparedStatement \u5BF9\u8C61</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        connection <span class="token operator">=</span> <span class="token class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7ED9?\u53F7\u8D4B\u503C</span>
        <span class="token comment">//\u6267\u884C, \u5F97\u5230\u7ED3\u679C\u96C6</span>
        set <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u904D\u5386\u8BE5\u7ED3\u679C\u96C6</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> id <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getName()</span>
            <span class="token class-name">String</span> sex <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getSex()</span>
            <span class="token class-name">Date</span> borndate <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">&quot;borndate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> phone <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;phone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u628A\u5F97\u5230\u7684resultset \u7684\u8BB0\u5F55\uFF0C\u5C01\u88C5\u5230Actor \u5BF9\u8C61\uFF0C\u653E\u5165\u5230list \u96C6\u5408</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Actor</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> borndate<span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;list \u96C6\u5408\u6570\u636E=&quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Actor</span> actor <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> actor<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> actor<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5173\u95ED\u8D44\u6E90</span>
        <span class="token class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u56E0\u4E3AArrayList \u548Cconnection \u6CA1\u6709\u4EFB\u4F55\u5173\u8054\uFF0C\u6240\u4EE5\u8BE5\u96C6\u5408\u53EF\u4EE5\u590D\u7528.</span>
    <span class="token keyword">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-10-dao\u548C\u589E\u5220\u6539\u67E5\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_14-10-dao\u548C\u589E\u5220\u6539\u67E5\u65B9\u6CD5" aria-hidden="true">#</a> 14.10 Dao\u548C\u589E\u5220\u6539\u67E5\u65B9\u6CD5</h3><h4 id="_14-10-1-dao\u5C42\u53CAbasicdao-\u4E0E\u6570\u636E\u5E93\u7684\u76F8\u5173\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_14-10-1-dao\u5C42\u53CAbasicdao-\u4E0E\u6570\u636E\u5E93\u7684\u76F8\u5173\u64CD\u4F5C" aria-hidden="true">#</a> 14.10.1 Dao\u5C42\u53CABasicDao\uFF1A\u4E0E\u6570\u636E\u5E93\u7684\u76F8\u5173\u64CD\u4F5C</h4><ol><li>Dao\uFF1Adata access object\uFF1A\u6570\u636E\u8BBF\u95EE\u5BF9\u8C61 <ul><li>Dao\u4E2D\u7684\u65B9\u6CD5\u5747\u4E3A\u201D\u5355\u7CBE\u5EA6\u65B9\u6CD5\u201C\u2014\u2014\u4E00\u4E2A\u65B9\u6CD5\u53EA\u5E72\u4E00\u4EF6\u4E8B\u3002</li><li>Service\u5C42\u4E2D\u7684\u65B9\u6CD5\u53EF\u4EE5\u662F\u201D\u975E\u5355\u7CBE\u5EA6\u65B9\u6CD5\u201C\uFF0C\u4E00\u4E2A\u65B9\u6CD5\u53EF\u4EE5\u5E72\u597D\u51E0\u4EF6\u4E8B\u3002</li><li>\u5982Dao\u4E2D\u7684\u6DFB\u52A0\u53EA\u662F\u6DFB\u52A0\uFF0CService\u5C42\u4E2D\u7684\u6DFB\u52A0\u8FD8\u6709\u5148\u67E5\u8BE2\uFF08\u5224\u65AD\u662F\u5426\u91CD\u590D\uFF09\u7684\u529F\u80FD\uFF0C\u7136\u540E\u624D\u662F\u6DFB\u52A0\u3002</li></ul></li><li>\u6839\u636E\u6570\u636E\u8BBF\u95EE\u5BF9\u8C61\u8BBE\u8BA1\u7684\u7C7B\u53EBDao\uFF0C\u9AD8\u5EA6\u62BD\u8C61\u7684\u8BE5\u7C7B\u53EBBasicDao\u3002</li><li>\u5728BasicDao\u7684\u57FA\u7840\u4E0A\uFF0C\u8BBE\u8BA1\u7EE7\u627F\u81EA\u5176\u7684\u5B9E\u73B0\u7279\u5B9A\u4E0E\u6570\u636E\u5E93\u64CD\u4F5C\u7684Dao\u7C7B\uFF0C\u53EF\u4EE5\u66F4\u597D\u5B8C\u6210\u5F00\u53D1\u4EFB\u52A1\u3002</li></ol><p><img src="`+j+'" alt="image.png" loading="lazy"><img src="'+D+`" alt="image.png" loading="lazy"></p><ol start="4"><li>BasicDao\uFF1A\u53EF\u4EE5\u8BBE\u8BA1\u6210\u7C7B\u3001\u4E5F\u53EF\u4EE5\u8BBE\u8BA1\u6210\u63A5\u53E3</li></ol><h4 id="_14-10-2-domain-javabean-pojo\u5C42-\u6570\u636E\u5E93\u5BF9\u5E94\u7684java\u7C7B" tabindex="-1"><a class="header-anchor" href="#_14-10-2-domain-javabean-pojo\u5C42-\u6570\u636E\u5E93\u5BF9\u5E94\u7684java\u7C7B" aria-hidden="true">#</a> 14.10.2 domain/JavaBean/pojo\u5C42\uFF1A\u6570\u636E\u5E93\u5BF9\u5E94\u7684java\u7C7B</h4><h4 id="_14-10-3-service\u5C42-\u5177\u4F53\u4E1A\u52A1\u5C42" tabindex="-1"><a class="header-anchor" href="#_14-10-3-service\u5C42-\u5177\u4F53\u4E1A\u52A1\u5C42" aria-hidden="true">#</a> 14.10.3 service\u5C42\uFF1A\u5177\u4F53\u4E1A\u52A1\u5C42</h4><h4 id="_14-10-3-view\u5C42-\u9875\u9762\u5C42" tabindex="-1"><a class="header-anchor" href="#_14-10-3-view\u5C42-\u9875\u9762\u5C42" aria-hidden="true">#</a> 14.10.3 view\u5C42\uFF1A\u9875\u9762\u5C42</h4><h3 id="_14-11-\u5C01\u88C5jdbc\u5DE5\u5177\u7C7B\u53CA\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_14-11-\u5C01\u88C5jdbc\u5DE5\u5177\u7C7B\u53CA\u4F7F\u7528" aria-hidden="true">#</a> 14.11 \u5C01\u88C5JDBC\u5DE5\u5177\u7C7B\u53CA\u4F7F\u7528</h3><h4 id="_14-11-1-\u5C01\u88C5\u6570\u636E\u5E93\u8FDE\u63A5\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_14-11-1-\u5C01\u88C5\u6570\u636E\u5E93\u8FDE\u63A5\u529F\u80FD" aria-hidden="true">#</a> 14.11.1 \u5C01\u88C5\u6570\u636E\u5E93\u8FDE\u63A5\u529F\u80FD</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u76F8\u5173\u7684\u5C5E\u6027(4\u4E2A), \u56E0\u4E3A\u53EA\u9700\u8981\u4E00\u4EFD\uFF0C\u56E0\u6B64\uFF0C\u6211\u4EEC\u505A\u51FAstatic</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user<span class="token punctuation">;</span> <span class="token comment">//\u7528\u6237\u540D</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span> <span class="token comment">//\u5BC6\u7801</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span> <span class="token comment">//url</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver<span class="token punctuation">;</span> <span class="token comment">//\u9A71\u52A8\u540D</span>

    <span class="token comment">//\u5728static\u4EE3\u7801\u5757\u521D\u59CB\u5316</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;src\\\\mysql.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8FDE\u63A5\u6570\u636E\u5E93, \u8FD4\u56DEConnection</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5173\u95ED\u76F8\u5173\u8D44\u6E90</span>
    <span class="token comment">/*
        1. ResultSet \u7ED3\u679C\u96C6
        2. Statement \u6216\u8005 PreparedStatement
        3. Connection
        4. \u5982\u679C\u9700\u8981\u5173\u95ED\u8D44\u6E90\uFF0C\u5C31\u4F20\u5165\u5BF9\u8C61\uFF0C\u5426\u5219\u4F20\u5165 null
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> set<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>set <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                set<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">user</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">dimitre123</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:13306/hsp_db02</span>
<span class="token key attr-name">driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-11-2-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_14-11-2-\u4F7F\u7528" aria-hidden="true">#</a> 14.11.2 \u4F7F\u7528</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils_Use</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//select</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from actor where id = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> set <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            set <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">int</span> id <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> sex <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Date</span> borndate <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">&quot;borndate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> phone <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;phone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> borndate <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//insert , update, delete</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update actor set name = ? where id = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5468\u661F\u9A70&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-11-3-\u5C01\u88C5\u6210druid\u5DE5\u5177\u7C7B\u2014\u2014\u5C06\u8FDE\u63A5\u529F\u80FD\u4F7F\u7528\u7EBF\u7A0B\u6C60\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_14-11-3-\u5C01\u88C5\u6210druid\u5DE5\u5177\u7C7B\u2014\u2014\u5C06\u8FDE\u63A5\u529F\u80FD\u4F7F\u7528\u7EBF\u7A0B\u6C60\u5B9E\u73B0" aria-hidden="true">#</a> 14.11.3 \u5C01\u88C5\u6210Druid\u5DE5\u5177\u7C7B\u2014\u2014\u5C06\u8FDE\u63A5\u529F\u80FD\u4F7F\u7528\u7EBF\u7A0B\u6C60\u5B9E\u73B0</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>hspedu<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>datasource</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtilsByDruid</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;src\\\\druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#key=value</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/girls?rewriteBatchedStatements=true</span>
<span class="token comment">#url=jdbc:mysql://localhost:3306/\u6570\u636E\u5E93\u540D?rew\u2026\u2026\u8868\u793A\u6279\u5904\u7406</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token comment">#initial connection Size</span>
<span class="token key attr-name">initialSize</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token comment">#min idle connecton size</span>
<span class="token key attr-name">minIdle</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
<span class="token comment">#max active connection size</span>
<span class="token key attr-name">maxActive</span><span class="token punctuation">=</span><span class="token value attr-value">20</span>
<span class="token comment">#max wait time (5000 mil seconds)</span>
<span class="token key attr-name">maxWait</span><span class="token punctuation">=</span><span class="token value attr-value">5000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-11-4-\u4F7F\u7528druid\u5DE5\u5177\u7C7B" tabindex="-1"><a class="header-anchor" href="#_14-11-4-\u4F7F\u7528druid\u5DE5\u5177\u7C7B" aria-hidden="true">#</a> 14.11.4 \u4F7F\u7528Druid\u5DE5\u5177\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtilsByDruid_USE</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F7F\u7528 druid\u65B9\u5F0F\u5B8C\u6210&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1. \u5F97\u5230\u8FDE\u63A5</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//2. \u7EC4\u7EC7\u4E00\u4E2Asql</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from actor where id &gt;= ?&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> set <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//3. \u521B\u5EFAPreparedStatement \u5BF9\u8C61</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD0\u884C\u7C7B\u578B com.alibaba.druid.pool.DruidPooledConnection</span>
            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7ED9?\u53F7\u8D4B\u503C</span>
            <span class="token comment">//\u6267\u884C, \u5F97\u5230\u7ED3\u679C\u96C6</span>
            set <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">int</span> id <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getName()</span>
                <span class="token class-name">String</span> sex <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getSex()</span>
                <span class="token class-name">Date</span> borndate <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">&quot;borndate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> phone <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;phone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> borndate <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>JDBCUtilsByDruid\u7684connection\u7C7B\u578B\u662FDruidPooledConnection\uFF0C\u5F53connection\u5173\u95ED\u65F6\uFF0C\u53EA\u662F\u5C06\u8FDE\u63A5\u7684\u5F15\u7528\u65AD\u5F00\uFF0C\u8FDE\u63A5\u8FD8\u662F\u5728\u8FDE\u63A5\u6C60\u5185\u3002</li><li>JDBCUtils\u7684connection\u7C7B\u578B\u662FJDBC4connection\uFF0C\u5F53connection\u5173\u95ED\u65F6\uFF0C\u5C31\u771F\u6B63\u5B9E\u73B0\u4E86\u8FDE\u63A5\u7684\u5173\u95ED\u3002</li></ul><h4 id="_14-11-5-\u5C01\u88C5dbutils\u2014\u2014\u5B9E\u73B0\u5173\u95ED\u8FDE\u63A5\u4E5F\u80FD\u4F7F\u7528\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_14-11-5-\u5C01\u88C5dbutils\u2014\u2014\u5B9E\u73B0\u5173\u95ED\u8FDE\u63A5\u4E5F\u80FD\u4F7F\u7528\u6570\u636E" aria-hidden="true">#</a> 14.11.5 \u5C01\u88C5DBUtils\u2014\u2014\u5B9E\u73B0\u5173\u95ED\u8FDE\u63A5\u4E5F\u80FD\u4F7F\u7528\u6570\u636E</h4><h2 id="\u7B2C15\u7AE0-\u6B63\u5219\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u7B2C15\u7AE0-\u6B63\u5219\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> \u7B2C15\u7AE0 \u6B63\u5219\u8868\u8FBE\u5F0F</h2>`,76),B={href:"https://www.yuque.com/attachments/yuque/0/2022/txt/1604140/1656599308654-6972a374-338e-4c72-b6f1-b888b5aa49ea.txt",target:"_blank",rel:"noopener noreferrer"},J=l("\u5E38\u7528\u6B63\u5219\u8868\u8FBE\u5F0F.txt"),I=s('<h3 id="_15-1-\u57FA\u672C\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_15-1-\u57FA\u672C\u4ECB\u7ECD" aria-hidden="true">#</a> 15.1 \u57FA\u672C\u4ECB\u7ECD</h3><ol><li>\u7528\u67D0\u79CD\u6A21\u5F0F\u53BB\u5339\u914D\u5B57\u7B26\u4E32\u7684\u4E00\u4E2A\u516C\u5F0F\u3002</li></ol><h3 id="_15-2-\u5FEB\u901F\u5165\u95E8" tabindex="-1"><a class="header-anchor" href="#_15-2-\u5FEB\u901F\u5165\u95E8" aria-hidden="true">#</a> 15.2 \u5FEB\u901F\u5165\u95E8</h3><h3 id="_15-2-\u5E95\u5C42\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_15-2-\u5E95\u5C42\u5B9E\u73B0" aria-hidden="true">#</a> 15.2 \u5E95\u5C42\u5B9E\u73B0</h3>',4);function z(L,R){const a=p("ExternalLinkIcon");return e(),o("div",null,[x,n("div",C,[P,n("p",null,[n("a",B,[J,c(a)])]),I])])}var Q=t(_,[["render",z],["__file","java-3.html.vue"]]);export{Q as default};
